import{r as b,dX as H,j as t,dY as l,u as S,dZ as N,cp as y,dz as u,dx as f,dR as k,d_ as A,d$ as T,e0 as m,e1 as w,e2 as D,f as x,e3 as J,e4 as j,e5 as h,e6 as g,e7 as I,e8 as L,bo as W,e9 as p,ea as F,eb as C,dE as R,dw as M,b0 as U,ec as v,ed as q,ee as z,ef as Y,ae as $,eg as G,eh as P,ei as V,ej as X,ek as Z,el as Q,em as K,en as tt,eo as st,ep as et,g as nt,eq as it,er as at,es as rt,et as ot,eu as ct,ev as dt,ew as ut,ex as lt,ey as mt,ez as xt}from"./index-5ZbQ4RqH.js";const Rt=(s,n,e,i,a)=>{b.useEffect(()=>{if(!s)return;const r=i?a==null?void 0:a.current:window;if(!r)return;const o=H(()=>{if(!n&&document.documentElement.className!=="is-locked")if(r===window)window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&e();else{const c=r;c.scrollTop>=c.scrollHeight-window.innerHeight-500&&e()}},50);return r.addEventListener("scroll",o),o(),()=>{r.removeEventListener("scroll",o)}},[s,i,a])},jt=({tonTransfer:s,timestamp:n,event:e,isScam:i,status:a})=>{const r=W(),{data:o}=y(u.TON),{fiatAmount:c}=f(o,k(s.amount)),d=s.recipient.address===r.rawAddress?"received":"send";return t.jsxs(A,{event:e,children:[t.jsx(p,{isScam:i,amount:s.amount,symbol:u.TON,total:c,timestamp:n,kind:d,status:a}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(g,{sender:s.sender}),d==="send"&&t.jsx(I,{recipient:s.recipient}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(F,{comment:i?void 0:s.comment})]})]})},ft=({action:s,timestamp:n,event:e,isScam:i})=>{const{tonTransfer:a}=s;return a?t.jsx(jt,{tonTransfer:a,event:e,isScam:i,timestamp:n,status:s.status}):t.jsx(l,{event:e})},At=({action:s,timestamp:n,event:e})=>{const{t:i}=S(),{auctionBid:a}=s,r=N(),{data:o}=y(u.TON),{fiatAmount:c}=f(o,k((a==null?void 0:a.amount.value)??0));return a?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i("transaction_type_bid")}),t.jsxs(m,{children:[r(a.amount.value)," ",a.amount.tokenName]}),c&&t.jsxs(m,{children:["≈ ",c]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(J,{beneficiary:a.auction}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]}):t.jsx(l,{event:e})},ht=({action:s,timestamp:n,event:e})=>{const{domainRenew:i}=s;return i?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i.domain}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(g,{sender:i.renewer,bounced:!0}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]}):t.jsx(l,{event:e})},yt=({action:s,timestamp:n,event:e})=>{const{smartContractExec:i}=s,a=N(),{data:r}=y(u.TON),{fiatAmount:o}=f(r,k((i==null?void 0:i.tonAttached)??0));return i?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsxs(T,{children:["- ",a(i.tonAttached)," ",u.TON]}),o&&t.jsxs(m,{children:["≈ ",o]}),t.jsx(w,{kind:"call",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(I,{recipient:i.contract,bounced:!0}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(L,{operation:i.operation})]})]}):t.jsx(l,{event:e})},kt=({extraCurrencyTransfer:s,timestamp:n,event:e,isScam:i,status:a})=>{const r=W(),{data:o}=y(s.currency.symbol),{fiatAmount:c}=f(o,k(s.amount,s.currency.decimals)),d=s.recipient.address===r.rawAddress?"received":"send";return t.jsxs(A,{event:e,children:[t.jsx(p,{isScam:i,amount:s.amount,decimals:s.currency.decimals,symbol:s.currency.symbol,total:c,timestamp:n,kind:d,status:a}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(g,{sender:s.sender}),d==="send"&&t.jsx(I,{recipient:s.recipient}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(F,{comment:i?void 0:s.comment})]})]})},vt=({action:s,timestamp:n,event:e,isScam:i})=>{const{extraCurrencyTransfer:a}=s;return a?t.jsx(kt,{extraCurrencyTransfer:a,event:e,isScam:i,timestamp:n,status:s.status}):t.jsx(l,{event:e})},St=({depositStake:s,timestamp:n,event:e,status:i})=>{const{t:a}=S(),{data:r}=y(u.TON),o=N(),{fiatAmount:c}=f(r,k(s.amount));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("staking_deposit")}),t.jsxs(m,{children:["- ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:i})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(C,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},Tt=({action:s,timestamp:n,event:e,isScam:i})=>{const{depositStake:a}=s;return a?t.jsx(St,{depositStake:a,timestamp:n,event:e,isScam:i,status:s.status}):t.jsx(l,{event:e})},wt=({withdrawStake:s,timestamp:n,event:e,status:i})=>{const{t:a}=S(),{data:r}=y(u.TON),o=N(),{fiatAmount:c}=f(r,k(s.amount));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("staking_withdraw")}),t.jsxs(m,{children:["+ ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:i})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(C,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},Dt=({action:s,timestamp:n,event:e,isScam:i})=>{const{withdrawStake:a}=s;return a?t.jsx(wt,{withdrawStake:a,timestamp:n,event:e,isScam:i,status:s.status}):t.jsx(l,{event:e})},Nt=({withdrawStakeRequest:s,timestamp:n,event:e,status:i})=>{const{t:a}=S(),{data:r}=y(u.TON),o=N(),{fiatAmount:c}=f(r,k(s.amount??0));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("activityActionModal_withdrawal_request")}),s.amount&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{children:["+ ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]})]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:i})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(C,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},bt=({action:s,timestamp:n,event:e,isScam:i})=>{const{withdrawStakeRequest:a}=s;return a?t.jsx(Nt,{withdrawStakeRequest:a,timestamp:n,event:e,isScam:i,status:s.status}):t.jsx(l,{event:e})},gt=({transactionHash:s,children:n})=>t.jsx(Y,{url:"https://tronscan.org/#/transaction/%s",eventId:s,children:n}),It=({timestamp:s,event:n})=>{const e=R(),{data:i}=M(),{fiatAmount:a}=f(i,n.assetAmount.relativeAmount),r=n.isScam,o=n.to===e.address?"received":"send";return t.jsxs(gt,{transactionHash:n.transactionHash,children:[t.jsx(p,{isScam:r,decimals:n.assetAmount.asset.decimals,amount:n.assetAmount.weiAmount.toFixed(0),symbol:n.assetAmount.asset.symbol,total:n.assetAmount.asset.address===U.address?a:void 0,timestamp:s,kind:o,status:n.isFailed?v.Failed:v.Ok}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[o==="received"&&t.jsx(q,{address:n.from}),o==="send"&&t.jsx(z,{address:n.to}),t.jsx(j,{eventId:n.transactionHash})]})]})},pt=s=>{switch(s.action.type){case"TonTransfer":return t.jsx(ft,{...s});case"NftItemTransfer":return t.jsx(st,{...s});case"ContractDeploy":return t.jsx(tt,{...s});case"UnSubscribe":return t.jsx(K,{...s});case"Subscribe":return t.jsx(Q,{...s});case"AuctionBid":return t.jsx(At,{...s});case"DomainRenew":return t.jsx(ht,{...s});case"SmartContractExec":return t.jsx(yt,{...s});case"JettonTransfer":return t.jsx(Z,{...s});case"JettonSwap":return t.jsx(X,{...s});case"JettonMint":return t.jsx(V,{...s});case"JettonBurn":return t.jsx(P,{...s});case"DepositStake":return t.jsx(Tt,{...s});case"WithdrawStake":return t.jsx(Dt,{...s});case"WithdrawStakeRequest":return t.jsx(bt,{...s});case"NftPurchase":return t.jsx(G,{...s});case"ExtraCurrencyTransfer":return t.jsx(vt,{...s});case"Unknown":return t.jsx(l,{event:s.event});default:return console.log(s),t.jsx(l,{event:s.event,children:s.action.type})}},Ct=s=>{const{t:n}=S();switch(s.event.type){case"asset-transfer":return t.jsx(It,{...s});default:return et(s.event.type),t.jsx(t.Fragment,{children:n("txActions_signRaw_types_unknownTransaction")})}},Et=({value:s,handleClose:n})=>{const e=b.useCallback(()=>{if(s)return s.type==="tron"?t.jsx(Ct,{...s}):t.jsx(pt,{...s})},[s,n]);return t.jsx($,{isOpen:!!s,handleClose:n,children:e})},Ot=({event:s,onClick:n,formattedDate:e})=>t.jsx(t.Fragment,{children:t.jsx(nt,{onClick:n,children:t.jsx(Wt,{event:s,formattedDate:e})})}),Wt=({event:s,formattedDate:n})=>{const e=R();return e?s.to===(e==null?void 0:e.address)?t.jsx(at,{amount:s.assetAmount.stringRelativeAmount,sender:s.from,symbol:s.assetAmount.asset.symbol,date:n,isScam:s.isScam,status:s.isFailed?v.Failed:v.Ok}):t.jsx(rt,{amount:s.assetAmount.stringRelativeAmount,symbol:s.assetAmount.asset.symbol,recipient:s.to,date:n,isScam:s.isScam,status:s.isFailed?v.Failed:v.Ok}):t.jsx(it,{})},_t=({items:s})=>{const[n,e]=b.useState(void 0),{i18n:i}=S(),a=b.useMemo(()=>ot(s),[s]);return t.jsxs(t.Fragment,{children:[a.map(([r,o])=>t.jsxs(ct,{children:[t.jsx(dt,{children:ut(i.language,r,o[0].timestamp)}),o.map(({timestamp:c,event:d,type:E,key:_})=>{const O=lt(i.language,r,c);return t.jsx(mt,{children:E==="tron"?t.jsx(Ot,{event:d,formattedDate:O,onClick:()=>e({type:"tron",event:d,timestamp:d.timestamp})}):E==="ton"?t.jsx(xt,{event:d,date:O,timestamp:c,setActivity:B=>e({type:"ton",...B})}):null},_)})]},r)),t.jsx(Et,{value:n,handleClose:()=>e(void 0)})]})};export{_t as M,Rt as u};
