import{dW as P,dX as k,bT as E,dY as H,cP as b,ck as M,r as i,j as e,dZ as u,S as x,I as f,d_ as N,h as _,dA as B,dB as U,dC as T,bo as W,d$ as A,cr as h,e0 as v,dG as j,e1 as p,u as y,bU as F,Y as m,dI as w,c as C,bd as D,e2 as S,bj as I,dF as J,a8 as L,z,af as V,cV as Y}from"./index-DR6GvvU1.js";import{u as G,M as K}from"./MobileActivityList--ASpquF4.js";import{S as X,R as Z,a as $,H as O}from"./TonActions-CnknHm6U.js";import q from"./EmptyActivity-nNPRoV4f.js";import{S as Q,R as ee}from"./BuyAction-DzkxA7kK.js";const g=({assetAddress:s,innerRef:t})=>{const{standalone:a}=_(),{refetch:o,isFetched:n,fetchNextPage:r,hasNextPage:d,isFetchingNextPage:l,data:c}=B(s);U(t,5e3,o);const R=l;return G(d,R,r,a,t),!n||!c?e.jsx(T,{}):c.length===0?e.jsx(i.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(q,{})}):e.jsxs(e.Fragment,{children:[e.jsx(K,{items:c}),R&&e.jsx(W,{size:3})]})},se=({info:s,balance:t})=>{const[a,o]=i.useMemo(()=>[A(t.balance,s.metadata.decimals),b.Address.parse(t.jetton.address).toString()],[s,t]),{data:n}=h(o),r=v(a,s.metadata.decimals),{fiatAmount:d}=j(n,a),{description:l,image:c}=s.metadata;return e.jsx(p,{amount:r,symbol:s.metadata.symbol,price:d,description:l,image:c})},te=({jettonAddress:s})=>{const{data:t}=P(s),{data:a}=k(s),o=E(),{data:n}=H(),r=b.Address.parse(s).toRawString(),d=o||n==null?void 0:n.find(c=>M(c.address)===r),l=i.useRef(null);return!t||!a||!n?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:t.metadata.name}),e.jsxs(f,{ref:l,children:[e.jsx(se,{balance:a,info:t}),e.jsxs(N,{children:[!o&&e.jsx(X,{asset:t.metadata.address}),e.jsx(Z,{jetton:t.metadata.address}),d&&e.jsx($,{fromAsset:d})]}),e.jsx(g,{assetAddress:a.jetton.address,innerRef:l})]})]})},ae=({info:{balance:s}})=>{const{t}=y(),a=i.useMemo(()=>A(s),[s]),o=v(a),{data:n}=h(w.TON),{fiatAmount:r}=j(n,a);return e.jsx(p,{amount:o,symbol:"TON",price:r,description:t("Ton_page_description"),image:"https://earth-wallet.com/img/toncoin.svg"})},ne=()=>{const{t:s}=y(),t=i.useRef(null),{data:a}=F();return a?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s("Toncoin")}),e.jsxs(f,{ref:t,children:[e.jsx(ae,{info:a}),e.jsx(O,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:w.TON})]})]}):e.jsx(u,{activity:4})},oe=()=>{const s=C();return{onOpen:i.useCallback(a=>{s.uiEvents.emit("transfer",{method:"transfer",id:Date.now(),params:{...a,from:"wallet"}})},[s])}},ie=({assetAmount:s})=>{const{data:t}=J(),{fiatAmount:a}=j(t,s.relativeAmount);return e.jsx(p,{amount:s.stringRelativeAmount,symbol:s.asset.symbol,price:a,image:s.asset.image,imageNoCorners:!0})},re=()=>{var n;const s=(n=D().data)==null?void 0:n.usdt,t=i.useRef(null),a=C(),{onOpen:o}=oe();return s===void 0?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s.asset.name}),e.jsxs(f,{ref:t,children:[e.jsx(ie,{assetAmount:s}),e.jsxs(N,{children:[e.jsx(S,{icon:e.jsx(Q,{}),title:"wallet_send",action:()=>o({chain:m.TRON})}),e.jsx(S,{icon:e.jsx(ee,{}),title:"wallet_receive",action:()=>a.uiEvents.emit("receive",{method:"receive",params:{chain:m.TRON,jetton:s.asset.id}})})]}),e.jsx(g,{assetAddress:I.address,innerRef:t})]})]})},ce=({extra:s})=>{const t=i.useMemo(()=>A(s.amount,s.preview.decimals),[s]),a=v(t),{data:o}=h(s.preview.symbol),{fiatAmount:n}=j(o,t);return e.jsx(p,{amount:a,symbol:s.preview.symbol,price:n,image:s.preview.image})},de=({name:s})=>{var n;y();const t=i.useRef(null),{data:a}=F(),o=(n=a==null?void 0:a.extraBalance)==null?void 0:n.find(r=>r.preview.symbol===s);return o?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s}),e.jsxs(f,{ref:t,children:[e.jsx(ce,{extra:o}),e.jsx(O,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:o.preview.symbol})]})]}):e.jsx(u,{activity:4})},je=()=>{const s=L(),{name:t}=z();return i.useEffect(()=>{t||s(V.home)},[t]),t?t===I.id?e.jsx(re,{}):t==="ton"?e.jsx(ne,{}):Y(decodeURIComponent(t))?e.jsx(te,{jettonAddress:decodeURIComponent(t)}):e.jsx(de,{name:t}):e.jsx(e.Fragment,{})};export{je as default};
