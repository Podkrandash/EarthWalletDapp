import{f2 as zi,f3 as wn,f4 as Pr,f5 as Ji,f6 as es,f7 as In,f8 as H,f9 as ct,fa as Br,fb as ce,fc as Fe,fd as ts,fe as Ar,ff as rs,fg as ns,fh as is,fi as ss,fj as os,fk as as,fl as fs,fm as us,fn as cs,fo as ls,c as On,r as te,bE as ds,u as hs,h as ps,X as gs,j as be,bJ as ys,e$ as vs,f0 as _s,fp as ms,d as Ts,an as bs}from"./index-DR6GvvU1.js";import{u as Cs}from"./navigate-V5vJ7JBi.js";let $r,rr,nr=0,ir=0;function Es(e,t,r){let n=t&&r||0;const i=t||new Array(16);e=e||{};let s=e.node||$r,o=e.clockseq!==void 0?e.clockseq:rr;if(s==null||o==null){const v=e.random||(e.rng||zi)();s==null&&(s=$r=[v[0]|1,v[1],v[2],v[3],v[4],v[5]]),o==null&&(o=rr=(v[6]<<8|v[7])&16383)}let c=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:ir+1;const d=c-nr+(l-ir)/1e4;if(d<0&&e.clockseq===void 0&&(o=o+1&16383),(d<0||c>nr)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");nr=c,ir=l,rr=o,c+=122192928e5;const b=((c&268435455)*1e4+l)%4294967296;i[n++]=b>>>24&255,i[n++]=b>>>16&255,i[n++]=b>>>8&255,i[n++]=b&255;const y=c/4294967296*1e4&268435455;i[n++]=y>>>8&255,i[n++]=y&255,i[n++]=y>>>24&15|16,i[n++]=y>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let v=0;v<6;++v)i[n+v]=s[v];return t||wn(i)}function Dn(e){if(!Pr(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Ss(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const Rs="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ws="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Pn(e,t,r){function n(i,s,o,c){var l;if(typeof i=="string"&&(i=Ss(i)),typeof s=="string"&&(s=Dn(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+i.length);if(d.set(s),d.set(i,s.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(let b=0;b<16;++b)o[c+b]=d[b];return o}return wn(d)}try{n.name=e}catch{}return n.DNS=Rs,n.URL=ws,n}function Is(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return Os(Ds(Ps(e),e.length*8))}function Os(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const s=e[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(o)}return t}function Bn(e){return(e+64>>>9<<4)+14+1}function Ds(e,t){e[t>>5]|=128<<t%32,e[Bn(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const c=r,l=n,d=i,b=s;r=G(r,n,i,s,e[o],7,-680876936),s=G(s,r,n,i,e[o+1],12,-389564586),i=G(i,s,r,n,e[o+2],17,606105819),n=G(n,i,s,r,e[o+3],22,-1044525330),r=G(r,n,i,s,e[o+4],7,-176418897),s=G(s,r,n,i,e[o+5],12,1200080426),i=G(i,s,r,n,e[o+6],17,-1473231341),n=G(n,i,s,r,e[o+7],22,-45705983),r=G(r,n,i,s,e[o+8],7,1770035416),s=G(s,r,n,i,e[o+9],12,-1958414417),i=G(i,s,r,n,e[o+10],17,-42063),n=G(n,i,s,r,e[o+11],22,-1990404162),r=G(r,n,i,s,e[o+12],7,1804603682),s=G(s,r,n,i,e[o+13],12,-40341101),i=G(i,s,r,n,e[o+14],17,-1502002290),n=G(n,i,s,r,e[o+15],22,1236535329),r=Y(r,n,i,s,e[o+1],5,-165796510),s=Y(s,r,n,i,e[o+6],9,-1069501632),i=Y(i,s,r,n,e[o+11],14,643717713),n=Y(n,i,s,r,e[o],20,-373897302),r=Y(r,n,i,s,e[o+5],5,-701558691),s=Y(s,r,n,i,e[o+10],9,38016083),i=Y(i,s,r,n,e[o+15],14,-660478335),n=Y(n,i,s,r,e[o+4],20,-405537848),r=Y(r,n,i,s,e[o+9],5,568446438),s=Y(s,r,n,i,e[o+14],9,-1019803690),i=Y(i,s,r,n,e[o+3],14,-187363961),n=Y(n,i,s,r,e[o+8],20,1163531501),r=Y(r,n,i,s,e[o+13],5,-1444681467),s=Y(s,r,n,i,e[o+2],9,-51403784),i=Y(i,s,r,n,e[o+7],14,1735328473),n=Y(n,i,s,r,e[o+12],20,-1926607734),r=V(r,n,i,s,e[o+5],4,-378558),s=V(s,r,n,i,e[o+8],11,-2022574463),i=V(i,s,r,n,e[o+11],16,1839030562),n=V(n,i,s,r,e[o+14],23,-35309556),r=V(r,n,i,s,e[o+1],4,-1530992060),s=V(s,r,n,i,e[o+4],11,1272893353),i=V(i,s,r,n,e[o+7],16,-155497632),n=V(n,i,s,r,e[o+10],23,-1094730640),r=V(r,n,i,s,e[o+13],4,681279174),s=V(s,r,n,i,e[o],11,-358537222),i=V(i,s,r,n,e[o+3],16,-722521979),n=V(n,i,s,r,e[o+6],23,76029189),r=V(r,n,i,s,e[o+9],4,-640364487),s=V(s,r,n,i,e[o+12],11,-421815835),i=V(i,s,r,n,e[o+15],16,530742520),n=V(n,i,s,r,e[o+2],23,-995338651),r=Z(r,n,i,s,e[o],6,-198630844),s=Z(s,r,n,i,e[o+7],10,1126891415),i=Z(i,s,r,n,e[o+14],15,-1416354905),n=Z(n,i,s,r,e[o+5],21,-57434055),r=Z(r,n,i,s,e[o+12],6,1700485571),s=Z(s,r,n,i,e[o+3],10,-1894986606),i=Z(i,s,r,n,e[o+10],15,-1051523),n=Z(n,i,s,r,e[o+1],21,-2054922799),r=Z(r,n,i,s,e[o+8],6,1873313359),s=Z(s,r,n,i,e[o+15],10,-30611744),i=Z(i,s,r,n,e[o+6],15,-1560198380),n=Z(n,i,s,r,e[o+13],21,1309151649),r=Z(r,n,i,s,e[o+4],6,-145523070),s=Z(s,r,n,i,e[o+11],10,-1120210379),i=Z(i,s,r,n,e[o+2],15,718787259),n=Z(n,i,s,r,e[o+9],21,-343485551),r=he(r,c),n=he(n,l),i=he(i,d),s=he(s,b)}return[r,n,i,s]}function Ps(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(Bn(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function he(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function Bs(e,t){return e<<t|e>>>32-t}function Mt(e,t,r,n,i,s){return he(Bs(he(he(t,e),he(n,s)),i),r)}function G(e,t,r,n,i,s,o){return Mt(t&r|~t&n,e,t,i,s,o)}function Y(e,t,r,n,i,s,o){return Mt(t&n|r&~n,e,t,i,s,o)}function V(e,t,r,n,i,s,o){return Mt(t^r^n,e,t,i,s,o)}function Z(e,t,r,n,i,s,o){return Mt(r^(t|~n),e,t,i,s,o)}const As=Pn("v3",48,Is),Ms=As;function Ns(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function sr(e,t){return e<<t|e>>>32-t}function Ls(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const o=unescape(encodeURIComponent(e));e=[];for(let c=0;c<o.length;++c)e.push(o.charCodeAt(c))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,i=Math.ceil(n/16),s=new Array(i);for(let o=0;o<i;++o){const c=new Uint32Array(16);for(let l=0;l<16;++l)c[l]=e[o*64+l*4]<<24|e[o*64+l*4+1]<<16|e[o*64+l*4+2]<<8|e[o*64+l*4+3];s[o]=c}s[i-1][14]=(e.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(e.length-1)*8&4294967295;for(let o=0;o<i;++o){const c=new Uint32Array(80);for(let h=0;h<16;++h)c[h]=s[o][h];for(let h=16;h<80;++h)c[h]=sr(c[h-3]^c[h-8]^c[h-14]^c[h-16],1);let l=r[0],d=r[1],b=r[2],y=r[3],v=r[4];for(let h=0;h<80;++h){const g=Math.floor(h/20),C=sr(l,5)+Ns(g,d,b,y)+v+t[g]+c[h]>>>0;v=y,y=b,b=sr(d,30)>>>0,d=l,l=C}r[0]=r[0]+l>>>0,r[1]=r[1]+d>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}const xs=Pn("v5",80,Ls),Us=xs,Ks="00000000-0000-0000-0000-000000000000";function js(e){if(!Pr(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}const Fs=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ks,parse:Dn,stringify:Ji,v1:Es,v3:Ms,v4:es,v5:Us,validate:Pr,version:js},Symbol.toStringTag,{value:"Module"}));var Mr={},An={exports:{}},Mn={},or={},Cr=function(e,t){return Cr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Cr(e,t)};function Nn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Cr(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wt=function(){return wt=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},wt.apply(this,arguments)};function Ln(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function xn(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function Un(e,t){return function(r,n){t(r,n,e)}}function Hs(e,t,r,n,i,s){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=n.kind,l=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,b=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),y,v=!1,h=r.length-1;h>=0;h--){var g={};for(var C in n)g[C]=C==="access"?{}:n[C];for(var C in n.access)g.access[C]=n.access[C];g.addInitializer=function(S){if(v)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(S||null))};var E=(0,r[h])(c==="accessor"?{get:b.get,set:b.set}:b[l],g);if(c==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(y=o(E.get))&&(b.get=y),(y=o(E.set))&&(b.set=y),(y=o(E.init))&&i.unshift(y)}else(y=o(E))&&(c==="field"?i.unshift(y):b[l]=y)}d&&Object.defineProperty(d,n.name,b),v=!0}function ks(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function qs(e){return typeof e=="symbol"?e:"".concat(e)}function Xs(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Kn(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function jn(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(b){try{d(n.next(b))}catch(y){o(y)}}function l(b){try{d(n.throw(b))}catch(y){o(y)}}function d(b){b.done?s(b.value):i(b.value).then(c,l)}d((n=n.apply(e,t||[])).next())})}function Fn(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(b){return l([d,b])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(b){d=[6,b],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Nt=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Hn(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Nt(t,e,r)}function It(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function kn(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Nr(arguments[t]));return e}function qn(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,c=s.length;o<c;o++,i++)n[i]=s[o];return n}function Xn(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Ne(e){return this instanceof Ne?(this.v=e,this):new Ne(e)}function $n(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(v){n[v]&&(i[v]=function(h){return new Promise(function(g,C){s.push([v,h,g,C])>1||c(v,h)})})}function c(v,h){try{l(n[v](h))}catch(g){y(s[0][3],g)}}function l(v){v.value instanceof Ne?Promise.resolve(v.value.v).then(d,b):y(s[0][2],v)}function d(v){c("next",v)}function b(v){c("throw",v)}function y(v,h){v(h),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Wn(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:Ne(e[i](o)),done:!1}:s?s(o):o}:s}}function Gn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof It=="function"?It(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(c,l){o=e[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(d){s({value:d,done:c})},o)}}function Yn(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var $s=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function Vn(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Nt(t,e,r);return $s(t,e),t}function Zn(e){return e&&e.__esModule?e:{default:e}}function Qn(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function zn(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function Jn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function ei(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Ws=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function ti(e){function t(n){e.error=e.hasError?new Ws(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(s){return t(s),r()})}catch(s){t(s)}}if(e.hasError)throw e.error}return r()}const Gs={__extends:Nn,__assign:wt,__rest:Ln,__decorate:xn,__param:Un,__metadata:Kn,__awaiter:jn,__generator:Fn,__createBinding:Nt,__exportStar:Hn,__values:It,__read:Nr,__spread:kn,__spreadArrays:qn,__spreadArray:Xn,__await:Ne,__asyncGenerator:$n,__asyncDelegator:Wn,__asyncValues:Gn,__makeTemplateObject:Yn,__importStar:Vn,__importDefault:Zn,__classPrivateFieldGet:Qn,__classPrivateFieldSet:zn,__classPrivateFieldIn:Jn,__addDisposableResource:ei,__disposeResources:ti},Ys=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ei,get __assign(){return wt},__asyncDelegator:Wn,__asyncGenerator:$n,__asyncValues:Gn,__await:Ne,__awaiter:jn,__classPrivateFieldGet:Qn,__classPrivateFieldIn:Jn,__classPrivateFieldSet:zn,__createBinding:Nt,__decorate:xn,__disposeResources:ti,__esDecorate:Hs,__exportStar:Hn,__extends:Nn,__generator:Fn,__importDefault:Zn,__importStar:Vn,__makeTemplateObject:Yn,__metadata:Kn,__param:Un,__propKey:qs,__read:Nr,__rest:Ln,__runInitializers:ks,__setFunctionName:Xs,__spread:kn,__spreadArray:Xn,__spreadArrays:qn,__values:It,default:Gs},Symbol.toStringTag,{value:"Module"})),Vs=In(Ys);var ri={},Le={},X={},ni={exports:{}},He={};Object.defineProperty(He,"__esModule",{value:!0});He.DataItem=void 0;class Zs{constructor(t,r){this.setTag=n=>{this.tag=n},this.clearTag=()=>{this.tag=void 0},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=t,this.tag=r}}He.DataItem=Zs;(function(e){(function(t,r){e.exports?e.exports=r():t.CBOR=r()})(H,function(){const{DataItem:t}=He;var r=function(){function n(f){this.$hex=f}n.prototype={length:function(){return this.$hex.length/2},toString:function(f){if(!f||f==="hex"||f===16)return this.$hex;if(f==="utf-8"){for(var p="",_=0;_<this.$hex.length;_+=2)p+="%"+this.$hex.substring(_,_+2);return decodeURIComponent(p)}if(f==="latin"){for(var p=[],_=0;_<this.$hex.length;_+=2)p.push(parseInt(this.$hex.substring(_,_+2),16));return String.fromCharCode.apply(String,p)}throw new Error("Unrecognised format: "+f)}},n.fromLatinString=function(f){for(var p="",_=0;_<f.length;_++){var A=f.charCodeAt(_).toString(16);A.length===1&&(A="0"+A),p+=A}return new n(p)},n.fromUtf8String=function(f){for(var p=encodeURIComponent(f),_="",A=0;A<p.length;A++)if(p.charAt(A)==="%")_+=p.substring(A+1,A+3),A+=2;else{var N=p.charCodeAt(A).toString(16);N.length<2&&(N="0"+N),_+=N}return new n(_)};var i=[],s={},o=function(f){return function(){throw new Error(f+" not implemented")}};function c(){}c.prototype={peekByte:o("peekByte"),readByte:o("readByte"),readChunk:o("readChunk"),readFloat16:function(){var f=this.readUint16(),p=(f&32767)>>10,_=f&1023,A=f&32768;if(p===31)return _===0?A?-1/0:1/0:NaN;var N=p?Math.pow(2,p-25)*(1024+_):Math.pow(2,-24)*_;return A?-N:N},readFloat32:function(){var f=this.readUint32(),p=(f&2147483647)>>23,_=f&8388607,A=f&2147483648;if(p===255)return _===0?A?-1/0:1/0:NaN;var N=p?Math.pow(2,p-23-127)*(8388608+_):Math.pow(2,-149)*_;return A?-N:N},readFloat64:function(){var f=this.readUint32(),p=this.readUint32(),_=f>>20&2047,A=(f&1048575)*4294967296+p,N=f&2147483648;if(_===2047)return A===0?N?-1/0:1/0:NaN;var W=_?Math.pow(2,_-52-1023)*(4503599627370496+A):Math.pow(2,-1074)*A;return N?-W:W},readUint16:function(){return this.readByte()*256+this.readByte()},readUint32:function(){return this.readUint16()*65536+this.readUint16()},readUint64:function(){return this.readUint32()*4294967296+this.readUint32()}};function l(){}l.prototype={writeByte:o("writeByte"),result:o("result"),writeFloat16:o("writeFloat16"),writeFloat32:o("writeFloat32"),writeFloat64:o("writeFloat64"),writeUint16:function(f){this.writeByte(f>>8&255),this.writeByte(f&255)},writeUint32:function(f){this.writeUint16(f>>16&65535),this.writeUint16(f&65535)},writeUint64:function(f){if(f>=9007199254740992||f<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+f+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(f/4294967296)),this.writeUint32(f%4294967296)},writeString:o("writeString"),canWriteBinary:function(f){return!1},writeBinary:o("writeChunk")};function d(f){var p=f.readByte(),_=p>>5,A=p&31;return{type:_,value:A}}function b(f,p){var _=f.value;if(_<24)return _;if(_==24)return p.readByte();if(_==25)return p.readUint16();if(_==26)return p.readUint32();if(_==27)return p.readUint64();if(_==31)return null;o("Additional info: "+_)()}function y(f,p,_){_.writeByte(f<<5|p)}function v(f,p,_){var A=f<<5;p<24?_.writeByte(A|p):p<256?(_.writeByte(A|24),_.writeByte(p)):p<65536?(_.writeByte(A|25),_.writeUint16(p)):p<4294967296?(_.writeByte(A|26),_.writeUint32(p)):(_.writeByte(A|27),_.writeUint64(p))}var h=new Error;function g(f){var p=d(f);switch(p.type){case 0:return b(p,f);case 1:return-1-b(p,f);case 2:return f.readChunk(b(p,f));case 3:var _=f.readChunk(b(p,f));return _.toString("utf-8");case 4:case 5:var A=b(p,f),ie=[];if(A!==null){p.type===5&&(A*=2);for(var N=0;N<A;N++)ie[N]=g(f)}else for(var W;(W=g(f))!==h;)ie.push(W);if(p.type===5){for(var se={},N=0;N<ie.length;N+=2)se[ie[N]]=ie[N+1];return se}else return ie;case 6:var ke=b(p,f),_e=s[ke],ie=g(f);return _e?_e(ie):ie;case 7:if(p.value===25)return f.readFloat16();if(p.value===26)return f.readFloat32();if(p.value===27)return f.readFloat64();switch(b(p,f)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return h;default:throw new Error("Unknown fixed value: "+p.value)}default:throw new Error("Unsupported header: "+JSON.stringify(p))}throw new Error("not implemented yet")}function C(f,p){for(var _=0;_<i.length;_++){var A=i[_].fn(f);if(A!==void 0)return v(6,i[_].tag,p),C(A,p)}if(f&&typeof f.toCBOR=="function"&&(f=f.toCBOR()),f===!1)v(7,20,p);else if(f===!0)v(7,21,p);else if(f===null)v(7,22,p);else if(f===void 0)v(7,23,p);else if(typeof f=="number")Math.floor(f)===f&&f<9007199254740992&&f>-9007199254740992?f<0?v(1,-1-f,p):v(0,f,p):(y(7,27,p),p.writeFloat64(f));else if(typeof f=="string")p.writeString(f,function(W){v(3,W,p)});else if(p.canWriteBinary(f))p.writeBinary(f,function(W){v(2,W,p)});else if(typeof f=="object")if(D.config.useToJSON&&typeof f.toJSON=="function"&&(f=f.toJSON()),Array.isArray(f)){v(4,f.length,p);for(var _=0;_<f.length;_++)C(f[_],p)}else{var N=Object.keys(f);v(5,N.length,p);for(var _=0;_<N.length;_++){const se=parseInt(N[_]);isNaN(se)?(C(N[_],p),C(f[N[_]],p)):(C(se,p),C(f[N[_]],p))}}else throw new Error("CBOR encoding not supported: "+f)}var E=[],S=[],D={config:{useToJSON:!0},addWriter:function(f,p){typeof f=="string"?S.push(function(_){if(f===_)return p(_)}):S.push(f)},addReader:function(f,p){typeof f=="string"?E.push(function(_,A){if(f===A)return p(_,A)}):E.push(f)},encode:function(f,p){for(var _=0;_<S.length;_++){var A=S[_],N=A(p);if(N)return C(f,N),N.result()}throw new Error("Unsupported output format: "+p)},encodeDataItem:function(f,p){for(var _=0;_<S.length;_++){var A=S[_],N=A(p);if(N)return f.getTag()!==void 0?(C(f,N),N.result()):(C(f.getData(),N),N.result())}throw new Error("Unsupported output format: "+p)},decode:function(f,p){for(var _=0;_<E.length;_++){var A=E[_],N=A(f,p);if(N)return g(N)}throw new Error("Unsupported input format: "+p)},decodeToDataItem:function(f,p){for(var _=0;_<E.length;_++){var A=E[_],N=A(f,p);if(N){const W=g(N);return W instanceof t?W:new t(W)}}throw new Error("Unsupported input format: "+p)},addSemanticEncode:function(f,p){if(typeof f!="number"||f%1!==0||f<0)throw new Error("Tag must be a positive integer");return i.push({tag:f,fn:p}),this},addSemanticDecode:function(f,p){if(typeof f!="number"||f%1!==0||f<0)throw new Error("Tag must be a positive integer");return s[f]=p,this}};function I(f){this.buffer=f,this.pos=0}I.prototype=Object.create(c.prototype),I.prototype.peekByte=function(){return this.buffer[this.pos]},I.prototype.readByte=function(){return this.buffer[this.pos++]},I.prototype.readUint16=function(){var f=this.buffer.readUInt16BE(this.pos);return this.pos+=2,f},I.prototype.readUint32=function(){var f=this.buffer.readUInt32BE(this.pos);return this.pos+=4,f},I.prototype.readFloat32=function(){var f=this.buffer.readFloatBE(this.pos);return this.pos+=4,f},I.prototype.readFloat64=function(){var f=this.buffer.readDoubleBE(this.pos);return this.pos+=8,f},I.prototype.readChunk=function(f){var p=Buffer.alloc(f);return this.buffer.copy(p,0,this.pos,this.pos+=f),p};function w(f){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=f}w.prototype=Object.create(l.prototype),w.prototype.writeByte=function(f){this.latestBuffer[this.latestBufferOffset++]=f,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},w.prototype.writeFloat32=function(f){var p=Buffer.alloc(4);p.writeFloatBE(f,0),this.writeBuffer(p)},w.prototype.writeFloat64=function(f){var p=Buffer.alloc(8);p.writeDoubleBE(f,0),this.writeBuffer(p)},w.prototype.writeString=function(f,p){var _=Buffer.from(f,"utf-8");p(_.length),this.writeBuffer(_)},w.prototype.canWriteBinary=function(f){return f instanceof Buffer},w.prototype.writeBinary=function(f,p){p(f.length),this.writeBuffer(f)},w.prototype.writeBuffer=function(f){if(!(f instanceof Buffer))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=f.length?(f.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=f.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(f),this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(f),this.byteLength+=f.length},w.prototype.result=function(){for(var f=Buffer.alloc(this.byteLength),p=0,_=0;_<this.completeBuffers.length;_++){var A=this.completeBuffers[_];A.copy(f,p,0,A.length),p+=A.length}return this.latestBufferOffset&&this.latestBuffer.copy(f,p,0,this.latestBufferOffset),this.stringFormat?f.toString(this.stringFormat):f},typeof Buffer=="function"&&(D.addReader(function(f,p){if(Buffer.isBuffer(f))return new I(f);if(p==="hex"||p==="base64"){var _=Buffer.from(f,p);return new I(_)}}),D.addWriter(function(f){if(!f||f==="buffer")return new w;if(f==="hex"||f==="base64")return new w(f)}));function M(f){this.hex=f,this.pos=0}M.prototype=Object.create(c.prototype),M.prototype.peekByte=function(){var f=this.hex.substring(this.pos,2);return parseInt(f,16)},M.prototype.readByte=function(){var f=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(f,16)},M.prototype.readChunk=function(f){var p=this.hex.substring(this.pos,this.pos+f*2);return this.pos+=f*2,typeof Buffer=="function"?Buffer.from(p,"hex"):new n(p)};function B(f){this.$hex="",this.finalFormat=f||"hex"}return B.prototype=Object.create(l.prototype),B.prototype.writeByte=function(f){if(f<0||f>255)throw new Error("Byte value out of range: "+f);var p=f.toString(16);p.length==1&&(p="0"+p),this.$hex+=p},B.prototype.canWriteBinary=function(f){return f instanceof n||typeof Buffer=="function"&&f instanceof Buffer},B.prototype.writeBinary=function(f,p){if(f instanceof n)p(f.length()),this.$hex+=f.$hex;else if(typeof Buffer=="function"&&f instanceof Buffer)p(f.length),this.$hex+=f.toString("hex");else throw new TypeError("HexWriter only accepts BinaryHex or Buffers")},B.prototype.result=function(){return this.finalFormat==="buffer"&&typeof Buffer=="function"?Buffer.from(this.$hex,"hex"):new n(this.$hex).toString(this.finalFormat)},B.prototype.writeString=function(f,p){var _=n.fromUtf8String(f);p(_.length()),this.$hex+=_.$hex},D.addReader(function(f,p){if(f instanceof n||f.$hex)return new M(f.$hex);if(p==="hex")return new M(f)}),D.addWriter(function(f){if(f==="hex")return new B}),D}();return r.addSemanticEncode(0,function(n){if(n instanceof Date)return n.toISOString()}).addSemanticDecode(0,function(n){return new Date(n)}).addSemanticDecode(1,function(n){return new Date(n)}),r})})(ni);var Qs=ni.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DataItem=e.addWriter=e.addReader=e.addSemanticEncode=e.addSemanticDecode=e.decodeToDataItem=e.encodeDataItem=void 0;var t=Qs;Object.defineProperty(e,"encodeDataItem",{enumerable:!0,get:function(){return t.encodeDataItem}}),Object.defineProperty(e,"decodeToDataItem",{enumerable:!0,get:function(){return t.decodeToDataItem}}),Object.defineProperty(e,"addSemanticDecode",{enumerable:!0,get:function(){return t.addSemanticDecode}}),Object.defineProperty(e,"addSemanticEncode",{enumerable:!0,get:function(){return t.addSemanticEncode}}),Object.defineProperty(e,"addReader",{enumerable:!0,get:function(){return t.addReader}}),Object.defineProperty(e,"addWriter",{enumerable:!0,get:function(){return t.addWriter}});var r=He;Object.defineProperty(e,"DataItem",{enumerable:!0,get:function(){return r.DataItem}})})(X);Object.defineProperty(Le,"__esModule",{value:!0});Le.patchTags=void 0;const Tt=X,Wr=[],zs=e=>{e.forEach(t=>{Wr.find(r=>r===t)||((0,Tt.addSemanticEncode)(t,r=>{if(r instanceof Tt.DataItem&&r.getTag()===t)return r.getData()}),(0,Tt.addSemanticDecode)(t,r=>new Tt.DataItem(r,t)),Wr.push(t))})};Le.patchTags=zs;var q={};Object.defineProperty(q,"__esModule",{value:!0});q.RegistryTypes=q.RegistryType=void 0;class re{constructor(t,r){this.type=t,this.tag=r,this.getTag=()=>this.tag,this.getType=()=>this.type}}q.RegistryType=re;q.RegistryTypes={UUID:new re("uuid",37),BYTES:new re("bytes",void 0),CRYPTO_HDKEY:new re("crypto-hdkey",303),CRYPTO_KEYPATH:new re("crypto-keypath",304),CRYPTO_COIN_INFO:new re("crypto-coin-info",305),CRYPTO_ECKEY:new re("crypto-eckey",306),CRYPTO_OUTPUT:new re("crypto-output",308),CRYPTO_PSBT:new re("crypto-psbt",310),CRYPTO_ACCOUNT:new re("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new re("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new re("qr-hardware-call",1201),KEY_DERIVATION_CALL:new re("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new re("key-derivation-schema",1302)};var Lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptExpressions=e.ScriptExpression=void 0;class t{constructor(n,i){this.tag=n,this.expression=i,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}e.ScriptExpression=t,t.fromTag=r=>Object.values(e.ScriptExpressions).find(i=>i.getTag()===r),e.ScriptExpressions={SCRIPT_HASH:new t(400,"sh"),WITNESS_SCRIPT_HASH:new t(401,"wsh"),PUBLIC_KEY:new t(402,"pk"),PUBLIC_KEY_HASH:new t(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new t(404,"wpkh"),COMBO:new t(405,"combo"),MULTISIG:new t(406,"multi"),SORTED_MULTISIG:new t(407,"sortedmulti"),ADDRESS:new t(307,"addr"),RAW_SCRIPT:new t(408,"raw")}})(Lt);Object.defineProperty(ri,"__esModule",{value:!0});const Js=Le,eo=q,to=Lt,ro=Object.values(eo.RegistryTypes).filter(e=>!!e.getTag()).map(e=>e.getTag()),no=Object.values(to.ScriptExpressions).map(e=>e.getTag());(0,Js.patchTags)(ro.concat(no));var ye={},Er={exports:{}},Lr={exports:{}},Me=typeof Reflect=="object"?Reflect:null,Gr=Me&&typeof Me.apply=="function"?Me.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},St;Me&&typeof Me.ownKeys=="function"?St=Me.ownKeys:Object.getOwnPropertySymbols?St=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:St=function(t){return Object.getOwnPropertyNames(t)};function io(e){console&&console.warn&&console.warn(e)}var ii=Number.isNaN||function(t){return t!==t};function K(){K.init.call(this)}Lr.exports=K;Lr.exports.once=fo;K.EventEmitter=K;K.prototype._events=void 0;K.prototype._eventsCount=0;K.prototype._maxListeners=void 0;var Yr=10;function xt(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(K,"defaultMaxListeners",{enumerable:!0,get:function(){return Yr},set:function(e){if(typeof e!="number"||e<0||ii(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Yr=e}});K.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};K.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ii(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function si(e){return e._maxListeners===void 0?K.defaultMaxListeners:e._maxListeners}K.prototype.getMaxListeners=function(){return si(this)};K.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var c=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw c.context=o,c}var l=s[t];if(l===void 0)return!1;if(typeof l=="function")Gr(l,this,r);else for(var d=l.length,b=ci(l,d),n=0;n<d;++n)Gr(b[n],this,r);return!0};function oi(e,t,r,n){var i,s,o;if(xt(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),o===void 0)o=s[t]=r,++e._eventsCount;else if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=si(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,io(c)}return e}K.prototype.addListener=function(t,r){return oi(this,t,r,!1)};K.prototype.on=K.prototype.addListener;K.prototype.prependListener=function(t,r){return oi(this,t,r,!0)};function so(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ai(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=so.bind(n);return i.listener=r,n.wrapFn=i,i}K.prototype.once=function(t,r){return xt(r),this.on(t,ai(this,t,r)),this};K.prototype.prependOnceListener=function(t,r){return xt(r),this.prependListener(t,ai(this,t,r)),this};K.prototype.removeListener=function(t,r){var n,i,s,o,c;if(xt(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){c=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():oo(n,s),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,c||r)}return this};K.prototype.off=K.prototype.removeListener;K.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function fi(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?ao(i):ci(i,i.length)}K.prototype.listeners=function(t){return fi(this,t,!0)};K.prototype.rawListeners=function(t){return fi(this,t,!1)};K.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ui.call(e,t)};K.prototype.listenerCount=ui;function ui(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}K.prototype.eventNames=function(){return this._eventsCount>0?St(this._events):[]};function ci(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function oo(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ao(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function fo(e,t){return new Promise(function(r,n){function i(o){e.removeListener(t,s),n(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}li(e,t,s,{once:!0}),t!=="error"&&uo(e,i,{once:!0})})}function uo(e,t,r){typeof e.on=="function"&&li(e,"error",t,r)}function li(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){n.once&&e.removeEventListener(t,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var di=Lr.exports,hi=di.EventEmitter,ar,Vr;function co(){if(Vr)return ar;Vr=1;function e(g,C){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(g);C&&(S=S.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),E.push.apply(E,S)}return E}function t(g){for(var C=1;C<arguments.length;C++){var E=arguments[C]!=null?arguments[C]:{};C%2?e(Object(E),!0).forEach(function(S){r(g,S,E[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):e(Object(E)).forEach(function(S){Object.defineProperty(g,S,Object.getOwnPropertyDescriptor(E,S))})}return g}function r(g,C,E){return C=o(C),C in g?Object.defineProperty(g,C,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[C]=E,g}function n(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")}function i(g,C){for(var E=0;E<C.length;E++){var S=C[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,o(S.key),S)}}function s(g,C,E){return C&&i(g.prototype,C),E&&i(g,E),Object.defineProperty(g,"prototype",{writable:!1}),g}function o(g){var C=c(g,"string");return typeof C=="symbol"?C:String(C)}function c(g,C){if(typeof g!="object"||g===null)return g;var E=g[Symbol.toPrimitive];if(E!==void 0){var S=E.call(g,C||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(g)}var l=ct,d=l.Buffer,b=Br,y=b.inspect,v=y&&y.custom||"inspect";function h(g,C,E){d.prototype.copy.call(g,C,E)}return ar=function(){function g(){n(this,g),this.head=null,this.tail=null,this.length=0}return s(g,[{key:"push",value:function(E){var S={data:E,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(E){var S={data:E,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(this.length===0)return"";for(var S=this.head,D=""+S.data;S=S.next;)D+=E+S.data;return D}},{key:"concat",value:function(E){if(this.length===0)return d.alloc(0);for(var S=d.allocUnsafe(E>>>0),D=this.head,I=0;D;)h(D.data,S,I),I+=D.data.length,D=D.next;return S}},{key:"consume",value:function(E,S){var D;return E<this.head.data.length?(D=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):E===this.head.data.length?D=this.shift():D=S?this._getString(E):this._getBuffer(E),D}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var S=this.head,D=1,I=S.data;for(E-=I.length;S=S.next;){var w=S.data,M=E>w.length?w.length:E;if(M===w.length?I+=w:I+=w.slice(0,E),E-=M,E===0){M===w.length?(++D,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=w.slice(M));break}++D}return this.length-=D,I}},{key:"_getBuffer",value:function(E){var S=d.allocUnsafe(E),D=this.head,I=1;for(D.data.copy(S),E-=D.data.length;D=D.next;){var w=D.data,M=E>w.length?w.length:E;if(w.copy(S,S.length-E,0,M),E-=M,E===0){M===w.length?(++I,D.next?this.head=D.next:this.head=this.tail=null):(this.head=D,D.data=w.slice(M));break}++I}return this.length-=I,S}},{key:v,value:function(E,S){return y(this,t(t({},S),{},{depth:0,customInspect:!1}))}}]),g}(),ar}function lo(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Sr,this,e)):process.nextTick(Sr,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Rt,r):(r._writableState.errorEmitted=!0,process.nextTick(Zr,r,s)):process.nextTick(Zr,r,s):t?(process.nextTick(Rt,r),t(s)):process.nextTick(Rt,r)}),this)}function Zr(e,t){Sr(e,t),Rt(e)}function Rt(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function ho(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Sr(e,t){e.emit("error",t)}function po(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var pi={destroy:lo,undestroy:ho,errorOrDestroy:po},we={};function go(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var gi={};function ae(e,t,r){r||(r=Error);function n(s,o,c){return typeof t=="string"?t:t(s,o,c)}var i=function(s){go(o,s);function o(c,l,d){return s.call(this,n(c,l,d))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=e,gi[e]=i}function Qr(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function yo(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function vo(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function _o(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}ae("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);ae("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&yo(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(vo(e," argument"))i="The ".concat(e," ").concat(n," ").concat(Qr(t,"type"));else{var s=_o(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(Qr(t,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);ae("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ae("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});ae("ERR_STREAM_PREMATURE_CLOSE","Premature close");ae("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});ae("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ae("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ae("ERR_STREAM_WRITE_AFTER_END","write after end");ae("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ae("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);ae("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");we.codes=gi;var mo=we.codes.ERR_INVALID_OPT_VALUE;function To(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function bo(e,t,r,n){var i=To(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new mo(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var yi={getHighWaterMark:bo},Co=Eo;function Eo(e,t){if(fr("noDeprecation"))return e;var r=!1;function n(){if(!r){if(fr("throwDeprecation"))throw new Error(t);fr("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function fr(e){try{if(!H.localStorage)return!1}catch{return!1}var t=H.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var ur,zr;function vi(){if(zr)return ur;zr=1,ur=p;function e(T){var m=this;this.next=null,this.entry=null,this.finish=function(){zt(m,T)}}var t;p.WritableState=B;var r={deprecate:Co},n=hi,i=ct.Buffer,s=(typeof H<"u"?H:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(T){return i.from(T)}function c(T){return i.isBuffer(T)||T instanceof s}var l=pi,d=yi,b=d.getHighWaterMark,y=we.codes,v=y.ERR_INVALID_ARG_TYPE,h=y.ERR_METHOD_NOT_IMPLEMENTED,g=y.ERR_MULTIPLE_CALLBACK,C=y.ERR_STREAM_CANNOT_PIPE,E=y.ERR_STREAM_DESTROYED,S=y.ERR_STREAM_NULL_VALUES,D=y.ERR_STREAM_WRITE_AFTER_END,I=y.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;ce(p,n);function M(){}function B(T,m,O){t=t||xe(),T=T||{},typeof O!="boolean"&&(O=m instanceof t),this.objectMode=!!T.objectMode,O&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=b(this,T,"writableHighWaterMark",O),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=T.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){ie(m,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}B.prototype.getBuffer=function(){for(var m=this.bufferedRequest,O=[];m;)O.push(m),m=m.next;return O},function(){try{Object.defineProperty(B.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var f;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(m){return f.call(this,m)?!0:this!==p?!1:m&&m._writableState instanceof B}})):f=function(m){return m instanceof this};function p(T){t=t||xe();var m=this instanceof t;if(!m&&!f.call(p,this))return new p(T);this._writableState=new B(T,this,m),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),n.call(this)}p.prototype.pipe=function(){w(this,new C)};function _(T,m){var O=new D;w(T,O),process.nextTick(m,O)}function A(T,m,O,L){var U;return O===null?U=new S:typeof O!="string"&&!m.objectMode&&(U=new v("chunk",["string","Buffer"],O)),U?(w(T,U),process.nextTick(L,U),!1):!0}p.prototype.write=function(T,m,O){var L=this._writableState,U=!1,a=!L.objectMode&&c(T);return a&&!i.isBuffer(T)&&(T=o(T)),typeof m=="function"&&(O=m,m=null),a?m="buffer":m||(m=L.defaultEncoding),typeof O!="function"&&(O=M),L.ending?_(this,O):(a||A(this,L,T,O))&&(L.pendingcb++,U=W(this,L,a,T,m,O)),U},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,!T.writing&&!T.corked&&!T.bufferProcessing&&T.bufferedRequest&&Ie(this,T))},p.prototype.setDefaultEncoding=function(m){if(typeof m=="string"&&(m=m.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((m+"").toLowerCase())>-1))throw new I(m);return this._writableState.defaultEncoding=m,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function N(T,m,O){return!T.objectMode&&T.decodeStrings!==!1&&typeof m=="string"&&(m=i.from(m,O)),m}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function W(T,m,O,L,U,a){if(!O){var u=N(m,L,U);L!==u&&(O=!0,U="buffer",L=u)}var R=m.objectMode?1:L.length;m.length+=R;var P=m.length<m.highWaterMark;if(P||(m.needDrain=!0),m.writing||m.corked){var k=m.lastBufferedRequest;m.lastBufferedRequest={chunk:L,encoding:U,isBuf:O,callback:a,next:null},k?k.next=m.lastBufferedRequest:m.bufferedRequest=m.lastBufferedRequest,m.bufferedRequestCount+=1}else se(T,m,!1,R,L,U,a);return P}function se(T,m,O,L,U,a,u){m.writelen=L,m.writecb=u,m.writing=!0,m.sync=!0,m.destroyed?m.onwrite(new E("write")):O?T._writev(U,m.onwrite):T._write(U,a,m.onwrite),m.sync=!1}function ke(T,m,O,L,U){--m.pendingcb,O?(process.nextTick(U,L),process.nextTick(Te,T,m),T._writableState.errorEmitted=!0,w(T,L)):(U(L),T._writableState.errorEmitted=!0,w(T,L),Te(T,m))}function _e(T){T.writing=!1,T.writecb=null,T.length-=T.writelen,T.writelen=0}function ie(T,m){var O=T._writableState,L=O.sync,U=O.writecb;if(typeof U!="function")throw new g;if(_e(O),m)ke(T,O,L,m,U);else{var a=vt(O)||T.destroyed;!a&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&Ie(T,O),L?process.nextTick(me,T,O,a,U):me(T,O,a,U)}}function me(T,m,O,L){O||yt(T,m),m.pendingcb--,L(),Te(T,m)}function yt(T,m){m.length===0&&m.needDrain&&(m.needDrain=!1,T.emit("drain"))}function Ie(T,m){m.bufferProcessing=!0;var O=m.bufferedRequest;if(T._writev&&O&&O.next){var L=m.bufferedRequestCount,U=new Array(L),a=m.corkedRequestsFree;a.entry=O;for(var u=0,R=!0;O;)U[u]=O,O.isBuf||(R=!1),O=O.next,u+=1;U.allBuffers=R,se(T,m,!0,m.length,U,"",a.finish),m.pendingcb++,m.lastBufferedRequest=null,a.next?(m.corkedRequestsFree=a.next,a.next=null):m.corkedRequestsFree=new e(m),m.bufferedRequestCount=0}else{for(;O;){var P=O.chunk,k=O.encoding,x=O.callback,F=m.objectMode?1:P.length;if(se(T,m,!1,F,P,k,x),O=O.next,m.bufferedRequestCount--,m.writing)break}O===null&&(m.lastBufferedRequest=null)}m.bufferedRequest=O,m.bufferProcessing=!1}p.prototype._write=function(T,m,O){O(new h("_write()"))},p.prototype._writev=null,p.prototype.end=function(T,m,O){var L=this._writableState;return typeof T=="function"?(O=T,T=null,m=null):typeof m=="function"&&(O=m,m=null),T!=null&&this.write(T,m),L.corked&&(L.corked=1,this.uncork()),L.ending||Qt(this,L,O),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function vt(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function Zt(T,m){T._final(function(O){m.pendingcb--,O&&w(T,O),m.prefinished=!0,T.emit("prefinish"),Te(T,m)})}function _t(T,m){!m.prefinished&&!m.finalCalled&&(typeof T._final=="function"&&!m.destroyed?(m.pendingcb++,m.finalCalled=!0,process.nextTick(Zt,T,m)):(m.prefinished=!0,T.emit("prefinish")))}function Te(T,m){var O=vt(m);if(O&&(_t(T,m),m.pendingcb===0&&(m.finished=!0,T.emit("finish"),m.autoDestroy))){var L=T._readableState;(!L||L.autoDestroy&&L.endEmitted)&&T.destroy()}return O}function Qt(T,m,O){m.ending=!0,Te(T,m),O&&(m.finished?process.nextTick(O):T.once("finish",O)),m.ended=!0,T.writable=!1}function zt(T,m,O){var L=T.entry;for(T.entry=null;L;){var U=L.callback;m.pendingcb--,U(O),L=L.next}m.corkedRequestsFree.next=T}return Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(m){this._writableState&&(this._writableState.destroyed=m)}}),p.prototype.destroy=l.destroy,p.prototype._undestroy=l.undestroy,p.prototype._destroy=function(T,m){m(T)},ur}var cr,Jr;function xe(){if(Jr)return cr;Jr=1;var e=Object.keys||function(d){var b=[];for(var y in d)b.push(y);return b};cr=o;var t=mi(),r=vi();ce(o,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(d){if(!(this instanceof o))return new o(d);t.call(this,d),r.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process.nextTick(l,this)}function l(d){d.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),cr}var Ot={},xr=Fe.Buffer,en=xr.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function So(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Ro(e){var t=So(e);if(typeof t!="string"&&(xr.isEncoding===en||!en(e)))throw new Error("Unknown encoding: "+e);return t||e}Ot.StringDecoder=lt;function lt(e){this.encoding=Ro(e);var t;switch(this.encoding){case"utf16le":this.text=Bo,this.end=Ao,t=4;break;case"utf8":this.fillLast=Oo,t=4;break;case"base64":this.text=Mo,this.end=No,t=3;break;default:this.write=Lo,this.end=xo;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=xr.allocUnsafe(t)}lt.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};lt.prototype.end=Po;lt.prototype.text=Do;lt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function lr(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function wo(e,t,r){var n=t.length-1;if(n<r)return 0;var i=lr(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=lr(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=lr(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Io(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,""}}function Oo(e){var t=this.lastTotal-this.lastNeed,r=Io(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Do(e,t){var r=wo(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Po(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function Bo(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Ao(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Mo(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function No(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Lo(e){return e.toString(this.encoding)}function xo(e){return e&&e.length?this.write(e):""}var tn=we.codes.ERR_STREAM_PREMATURE_CLOSE;function Uo(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Ko(){}function jo(e){return e.setHeader&&typeof e.abort=="function"}function _i(e,t,r){if(typeof t=="function")return _i(e,null,t);t||(t={}),r=Uo(r||Ko);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||c()},o=e._writableState&&e._writableState.finished,c=function(){i=!1,o=!0,n||r.call(e)},l=e._readableState&&e._readableState.endEmitted,d=function(){n=!1,l=!0,i||r.call(e)},b=function(g){r.call(e,g)},y=function(){var g;if(n&&!l)return(!e._readableState||!e._readableState.ended)&&(g=new tn),r.call(e,g);if(i&&!o)return(!e._writableState||!e._writableState.ended)&&(g=new tn),r.call(e,g)},v=function(){e.req.on("finish",c)};return jo(e)?(e.on("complete",c),e.on("abort",y),e.req?v():e.on("request",v)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",d),e.on("finish",c),t.error!==!1&&e.on("error",b),e.on("close",y),function(){e.removeListener("complete",c),e.removeListener("abort",y),e.removeListener("request",v),e.req&&e.req.removeListener("finish",c),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("end",d),e.removeListener("error",b),e.removeListener("close",y)}}var Ur=_i,dr,rn;function Fo(){if(rn)return dr;rn=1;var e;function t(I,w,M){return w=r(w),w in I?Object.defineProperty(I,w,{value:M,enumerable:!0,configurable:!0,writable:!0}):I[w]=M,I}function r(I){var w=n(I,"string");return typeof w=="symbol"?w:String(w)}function n(I,w){if(typeof I!="object"||I===null)return I;var M=I[Symbol.toPrimitive];if(M!==void 0){var B=M.call(I,w||"default");if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(I)}var i=Ur,s=Symbol("lastResolve"),o=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),b=Symbol("handlePromise"),y=Symbol("stream");function v(I,w){return{value:I,done:w}}function h(I){var w=I[s];if(w!==null){var M=I[y].read();M!==null&&(I[d]=null,I[s]=null,I[o]=null,w(v(M,!1)))}}function g(I){process.nextTick(h,I)}function C(I,w){return function(M,B){I.then(function(){if(w[l]){M(v(void 0,!0));return}w[b](M,B)},B)}}var E=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((e={get stream(){return this[y]},next:function(){var w=this,M=this[c];if(M!==null)return Promise.reject(M);if(this[l])return Promise.resolve(v(void 0,!0));if(this[y].destroyed)return new Promise(function(_,A){process.nextTick(function(){w[c]?A(w[c]):_(v(void 0,!0))})});var B=this[d],f;if(B)f=new Promise(C(B,this));else{var p=this[y].read();if(p!==null)return Promise.resolve(v(p,!1));f=new Promise(this[b])}return this[d]=f,f}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var w=this;return new Promise(function(M,B){w[y].destroy(null,function(f){if(f){B(f);return}M(v(void 0,!0))})})}),e),E),D=function(w){var M,B=Object.create(S,(M={},t(M,y,{value:w,writable:!0}),t(M,s,{value:null,writable:!0}),t(M,o,{value:null,writable:!0}),t(M,c,{value:null,writable:!0}),t(M,l,{value:w._readableState.endEmitted,writable:!0}),t(M,b,{value:function(p,_){var A=B[y].read();A?(B[d]=null,B[s]=null,B[o]=null,p(v(A,!1))):(B[s]=p,B[o]=_)},writable:!0}),M));return B[d]=null,i(w,function(f){if(f&&f.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=B[o];p!==null&&(B[d]=null,B[s]=null,B[o]=null,p(f)),B[c]=f;return}var _=B[s];_!==null&&(B[d]=null,B[s]=null,B[o]=null,_(v(void 0,!0))),B[l]=!0}),w.on("readable",g.bind(null,B)),B};return dr=D,dr}var hr,nn;function Ho(){return nn||(nn=1,hr=function(){throw new Error("Readable.from is not available in the browser")}),hr}var pr,sn;function mi(){if(sn)return pr;sn=1,pr=_;var e;_.ReadableState=p,di.EventEmitter;var t=function(u,R){return u.listeners(R).length},r=hi,n=ct.Buffer,i=(typeof H<"u"?H:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(a){return n.from(a)}function o(a){return n.isBuffer(a)||a instanceof i}var c=Br,l;c&&c.debuglog?l=c.debuglog("stream"):l=function(){};var d=co(),b=pi,y=yi,v=y.getHighWaterMark,h=we.codes,g=h.ERR_INVALID_ARG_TYPE,C=h.ERR_STREAM_PUSH_AFTER_EOF,E=h.ERR_METHOD_NOT_IMPLEMENTED,S=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,D,I,w;ce(_,r);var M=b.errorOrDestroy,B=["error","close","destroy","pause","resume"];function f(a,u,R){if(typeof a.prependListener=="function")return a.prependListener(u,R);!a._events||!a._events[u]?a.on(u,R):Array.isArray(a._events[u])?a._events[u].unshift(R):a._events[u]=[R,a._events[u]]}function p(a,u,R){e=e||xe(),a=a||{},typeof R!="boolean"&&(R=u instanceof e),this.objectMode=!!a.objectMode,R&&(this.objectMode=this.objectMode||!!a.readableObjectMode),this.highWaterMark=v(this,a,"readableHighWaterMark",R),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=a.emitClose!==!1,this.autoDestroy=!!a.autoDestroy,this.destroyed=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(D||(D=Ot.StringDecoder),this.decoder=new D(a.encoding),this.encoding=a.encoding)}function _(a){if(e=e||xe(),!(this instanceof _))return new _(a);var u=this instanceof e;this._readableState=new p(a,this,u),this.readable=!0,a&&(typeof a.read=="function"&&(this._read=a.read),typeof a.destroy=="function"&&(this._destroy=a.destroy)),r.call(this)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(u){this._readableState&&(this._readableState.destroyed=u)}}),_.prototype.destroy=b.destroy,_.prototype._undestroy=b.undestroy,_.prototype._destroy=function(a,u){u(a)},_.prototype.push=function(a,u){var R=this._readableState,P;return R.objectMode?P=!0:typeof a=="string"&&(u=u||R.defaultEncoding,u!==R.encoding&&(a=n.from(a,u),u=""),P=!0),A(this,a,u,!1,P)},_.prototype.unshift=function(a){return A(this,a,null,!0,!1)};function A(a,u,R,P,k){l("readableAddChunk",u);var x=a._readableState;if(u===null)x.reading=!1,ie(a,x);else{var F;if(k||(F=W(x,u)),F)M(a,F);else if(x.objectMode||u&&u.length>0)if(typeof u!="string"&&!x.objectMode&&Object.getPrototypeOf(u)!==n.prototype&&(u=s(u)),P)x.endEmitted?M(a,new S):N(a,x,u,!0);else if(x.ended)M(a,new C);else{if(x.destroyed)return!1;x.reading=!1,x.decoder&&!R?(u=x.decoder.write(u),x.objectMode||u.length!==0?N(a,x,u,!1):Ie(a,x)):N(a,x,u,!1)}else P||(x.reading=!1,Ie(a,x))}return!x.ended&&(x.length<x.highWaterMark||x.length===0)}function N(a,u,R,P){u.flowing&&u.length===0&&!u.sync?(u.awaitDrain=0,a.emit("data",R)):(u.length+=u.objectMode?1:R.length,P?u.buffer.unshift(R):u.buffer.push(R),u.needReadable&&me(a)),Ie(a,u)}function W(a,u){var R;return!o(u)&&typeof u!="string"&&u!==void 0&&!a.objectMode&&(R=new g("chunk",["string","Buffer","Uint8Array"],u)),R}_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(a){D||(D=Ot.StringDecoder);var u=new D(a);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;for(var R=this._readableState.buffer.head,P="";R!==null;)P+=u.write(R.data),R=R.next;return this._readableState.buffer.clear(),P!==""&&this._readableState.buffer.push(P),this._readableState.length=P.length,this};var se=1073741824;function ke(a){return a>=se?a=se:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function _e(a,u){return a<=0||u.length===0&&u.ended?0:u.objectMode?1:a!==a?u.flowing&&u.length?u.buffer.head.data.length:u.length:(a>u.highWaterMark&&(u.highWaterMark=ke(a)),a<=u.length?a:u.ended?u.length:(u.needReadable=!0,0))}_.prototype.read=function(a){l("read",a),a=parseInt(a,10);var u=this._readableState,R=a;if(a!==0&&(u.emittedReadable=!1),a===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended))return l("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?O(this):me(this),null;if(a=_e(a,u),a===0&&u.ended)return u.length===0&&O(this),null;var P=u.needReadable;l("need readable",P),(u.length===0||u.length-a<u.highWaterMark)&&(P=!0,l("length less than watermark",P)),u.ended||u.reading?(P=!1,l("reading or ended",P)):P&&(l("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(a=_e(R,u)));var k;return a>0?k=m(a,u):k=null,k===null?(u.needReadable=u.length<=u.highWaterMark,a=0):(u.length-=a,u.awaitDrain=0),u.length===0&&(u.ended||(u.needReadable=!0),R!==a&&u.ended&&O(this)),k!==null&&this.emit("data",k),k};function ie(a,u){if(l("onEofChunk"),!u.ended){if(u.decoder){var R=u.decoder.end();R&&R.length&&(u.buffer.push(R),u.length+=u.objectMode?1:R.length)}u.ended=!0,u.sync?me(a):(u.needReadable=!1,u.emittedReadable||(u.emittedReadable=!0,yt(a)))}}function me(a){var u=a._readableState;l("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,u.emittedReadable||(l("emitReadable",u.flowing),u.emittedReadable=!0,process.nextTick(yt,a))}function yt(a){var u=a._readableState;l("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&(u.length||u.ended)&&(a.emit("readable"),u.emittedReadable=!1),u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,T(a)}function Ie(a,u){u.readingMore||(u.readingMore=!0,process.nextTick(vt,a,u))}function vt(a,u){for(;!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0);){var R=u.length;if(l("maybeReadMore read 0"),a.read(0),R===u.length)break}u.readingMore=!1}_.prototype._read=function(a){M(this,new E("_read()"))},_.prototype.pipe=function(a,u){var R=this,P=this._readableState;switch(P.pipesCount){case 0:P.pipes=a;break;case 1:P.pipes=[P.pipes,a];break;default:P.pipes.push(a);break}P.pipesCount+=1,l("pipe count=%d opts=%j",P.pipesCount,u);var k=(!u||u.end!==!1)&&a!==process.stdout&&a!==process.stderr,x=k?Oe:qe;P.endEmitted?process.nextTick(x):R.once("end",x),a.on("unpipe",F);function F(De,Pe){l("onunpipe"),De===R&&Pe&&Pe.hasUnpiped===!1&&(Pe.hasUnpiped=!0,Qi())}function Oe(){l("onend"),a.end()}var mt=Zt(R);a.on("drain",mt);var qr=!1;function Qi(){l("cleanup"),a.removeListener("close",er),a.removeListener("finish",tr),a.removeListener("drain",mt),a.removeListener("error",Jt),a.removeListener("unpipe",F),R.removeListener("end",Oe),R.removeListener("end",qe),R.removeListener("data",Xr),qr=!0,P.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&mt()}R.on("data",Xr);function Xr(De){l("ondata");var Pe=a.write(De);l("dest.write",Pe),Pe===!1&&((P.pipesCount===1&&P.pipes===a||P.pipesCount>1&&U(P.pipes,a)!==-1)&&!qr&&(l("false write response, pause",P.awaitDrain),P.awaitDrain++),R.pause())}function Jt(De){l("onerror",De),qe(),a.removeListener("error",Jt),t(a,"error")===0&&M(a,De)}f(a,"error",Jt);function er(){a.removeListener("finish",tr),qe()}a.once("close",er);function tr(){l("onfinish"),a.removeListener("close",er),qe()}a.once("finish",tr);function qe(){l("unpipe"),R.unpipe(a)}return a.emit("pipe",R),P.flowing||(l("pipe resume"),R.resume()),a};function Zt(a){return function(){var R=a._readableState;l("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&t(a,"data")&&(R.flowing=!0,T(a))}}_.prototype.unpipe=function(a){var u=this._readableState,R={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return a&&a!==u.pipes?this:(a||(a=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,a&&a.emit("unpipe",this,R),this);if(!a){var P=u.pipes,k=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var x=0;x<k;x++)P[x].emit("unpipe",this,{hasUnpiped:!1});return this}var F=U(u.pipes,a);return F===-1?this:(u.pipes.splice(F,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),a.emit("unpipe",this,R),this)},_.prototype.on=function(a,u){var R=r.prototype.on.call(this,a,u),P=this._readableState;return a==="data"?(P.readableListening=this.listenerCount("readable")>0,P.flowing!==!1&&this.resume()):a==="readable"&&!P.endEmitted&&!P.readableListening&&(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,l("on readable",P.length,P.reading),P.length?me(this):P.reading||process.nextTick(Te,this)),R},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(a,u){var R=r.prototype.removeListener.call(this,a,u);return a==="readable"&&process.nextTick(_t,this),R},_.prototype.removeAllListeners=function(a){var u=r.prototype.removeAllListeners.apply(this,arguments);return(a==="readable"||a===void 0)&&process.nextTick(_t,this),u};function _t(a){var u=a._readableState;u.readableListening=a.listenerCount("readable")>0,u.resumeScheduled&&!u.paused?u.flowing=!0:a.listenerCount("data")>0&&a.resume()}function Te(a){l("readable nexttick read 0"),a.read(0)}_.prototype.resume=function(){var a=this._readableState;return a.flowing||(l("resume"),a.flowing=!a.readableListening,Qt(this,a)),a.paused=!1,this};function Qt(a,u){u.resumeScheduled||(u.resumeScheduled=!0,process.nextTick(zt,a,u))}function zt(a,u){l("resume",u.reading),u.reading||a.read(0),u.resumeScheduled=!1,a.emit("resume"),T(a),u.flowing&&!u.reading&&a.read(0)}_.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function T(a){var u=a._readableState;for(l("flow",u.flowing);u.flowing&&a.read()!==null;);}_.prototype.wrap=function(a){var u=this,R=this._readableState,P=!1;a.on("end",function(){if(l("wrapped end"),R.decoder&&!R.ended){var F=R.decoder.end();F&&F.length&&u.push(F)}u.push(null)}),a.on("data",function(F){if(l("wrapped data"),R.decoder&&(F=R.decoder.write(F)),!(R.objectMode&&F==null)&&!(!R.objectMode&&(!F||!F.length))){var Oe=u.push(F);Oe||(P=!0,a.pause())}});for(var k in a)this[k]===void 0&&typeof a[k]=="function"&&(this[k]=function(Oe){return function(){return a[Oe].apply(a,arguments)}}(k));for(var x=0;x<B.length;x++)a.on(B[x],this.emit.bind(this,B[x]));return this._read=function(F){l("wrapped _read",F),P&&(P=!1,a.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return I===void 0&&(I=Fo()),I(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}}),_._fromList=m,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function m(a,u){if(u.length===0)return null;var R;return u.objectMode?R=u.buffer.shift():!a||a>=u.length?(u.decoder?R=u.buffer.join(""):u.buffer.length===1?R=u.buffer.first():R=u.buffer.concat(u.length),u.buffer.clear()):R=u.buffer.consume(a,u.decoder),R}function O(a){var u=a._readableState;l("endReadable",u.endEmitted),u.endEmitted||(u.ended=!0,process.nextTick(L,u,a))}function L(a,u){if(l("endReadableNT",a.endEmitted,a.length),!a.endEmitted&&a.length===0&&(a.endEmitted=!0,u.readable=!1,u.emit("end"),a.autoDestroy)){var R=u._writableState;(!R||R.autoDestroy&&R.finished)&&u.destroy()}}typeof Symbol=="function"&&(_.from=function(a,u){return w===void 0&&(w=Ho()),w(_,a,u)});function U(a,u){for(var R=0,P=a.length;R<P;R++)if(a[R]===u)return R;return-1}return pr}var Ti=le,Ut=we.codes,ko=Ut.ERR_METHOD_NOT_IMPLEMENTED,qo=Ut.ERR_MULTIPLE_CALLBACK,Xo=Ut.ERR_TRANSFORM_ALREADY_TRANSFORMING,$o=Ut.ERR_TRANSFORM_WITH_LENGTH_0,Kt=xe();ce(le,Kt);function Wo(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new qo);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function le(e){if(!(this instanceof le))return new le(e);Kt.call(this,e),this._transformState={afterTransform:Wo.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Go)}function Go(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){on(e,t,r)}):on(this,null,null)}le.prototype.push=function(e,t){return this._transformState.needTransform=!1,Kt.prototype.push.call(this,e,t)};le.prototype._transform=function(e,t,r){r(new ko("_transform()"))};le.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};le.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};le.prototype._destroy=function(e,t){Kt.prototype._destroy.call(this,e,function(r){t(r)})};function on(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new $o;if(e._transformState.transforming)throw new Xo;return e.push(null)}var Yo=ze,bi=Ti;ce(ze,bi);function ze(e){if(!(this instanceof ze))return new ze(e);bi.call(this,e)}ze.prototype._transform=function(e,t,r){r(null,e)};var gr;function Vo(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Ci=we.codes,Zo=Ci.ERR_MISSING_ARGS,Qo=Ci.ERR_STREAM_DESTROYED;function an(e){if(e)throw e}function zo(e){return e.setHeader&&typeof e.abort=="function"}function Jo(e,t,r,n){n=Vo(n);var i=!1;e.on("close",function(){i=!0}),gr===void 0&&(gr=Ur),gr(e,{readable:t,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,zo(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(o||new Qo("pipe"))}}}function fn(e){e()}function ea(e,t){return e.pipe(t)}function ta(e){return!e.length||typeof e[e.length-1]!="function"?an:e.pop()}function ra(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=ta(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Zo("streams");var i,s=t.map(function(o,c){var l=c<t.length-1,d=c>0;return Jo(o,l,d,function(b){i||(i=b),b&&s.forEach(fn),!l&&(s.forEach(fn),n(i))})});return t.reduce(ea)}var na=ra;(function(e,t){t=e.exports=mi(),t.Stream=t,t.Readable=t,t.Writable=vi(),t.Duplex=xe(),t.Transform=Ti,t.PassThrough=Yo,t.finished=Ur,t.pipeline=na})(Er,Er.exports);var ia=Er.exports,Dt=Fe.Buffer,Ei=ia.Transform,sa=ce;function oa(e,t){if(!Dt.isBuffer(e)&&typeof e!="string")throw new TypeError(t+" must be a string or a buffer")}function ve(e){Ei.call(this),this._block=Dt.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}sa(ve,Ei);ve.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(i){n=i}r(n)};ve.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)};ve.prototype.update=function(e,t){if(oa(e,"Data"),this._finalized)throw new Error("Digest already called");Dt.isBuffer(e)||(e=Dt.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var s=0,o=e.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};ve.prototype._update=function(){throw new Error("_update is not implemented")};ve.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();e!==void 0&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t};ve.prototype._digest=function(){throw new Error("_digest is not implemented")};var Si=ve,aa=ce,Ri=Si,fa=Fe.Buffer,ua=new Array(16);function jt(){Ri.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}aa(jt,Ri);jt.prototype._update=function(){for(var e=ua,t=0;t<16;++t)e[t]=this._block.readInt32LE(t*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=Q(r,n,i,s,e[0],3614090360,7),s=Q(s,r,n,i,e[1],3905402710,12),i=Q(i,s,r,n,e[2],606105819,17),n=Q(n,i,s,r,e[3],3250441966,22),r=Q(r,n,i,s,e[4],4118548399,7),s=Q(s,r,n,i,e[5],1200080426,12),i=Q(i,s,r,n,e[6],2821735955,17),n=Q(n,i,s,r,e[7],4249261313,22),r=Q(r,n,i,s,e[8],1770035416,7),s=Q(s,r,n,i,e[9],2336552879,12),i=Q(i,s,r,n,e[10],4294925233,17),n=Q(n,i,s,r,e[11],2304563134,22),r=Q(r,n,i,s,e[12],1804603682,7),s=Q(s,r,n,i,e[13],4254626195,12),i=Q(i,s,r,n,e[14],2792965006,17),n=Q(n,i,s,r,e[15],1236535329,22),r=z(r,n,i,s,e[1],4129170786,5),s=z(s,r,n,i,e[6],3225465664,9),i=z(i,s,r,n,e[11],643717713,14),n=z(n,i,s,r,e[0],3921069994,20),r=z(r,n,i,s,e[5],3593408605,5),s=z(s,r,n,i,e[10],38016083,9),i=z(i,s,r,n,e[15],3634488961,14),n=z(n,i,s,r,e[4],3889429448,20),r=z(r,n,i,s,e[9],568446438,5),s=z(s,r,n,i,e[14],3275163606,9),i=z(i,s,r,n,e[3],4107603335,14),n=z(n,i,s,r,e[8],1163531501,20),r=z(r,n,i,s,e[13],2850285829,5),s=z(s,r,n,i,e[2],4243563512,9),i=z(i,s,r,n,e[7],1735328473,14),n=z(n,i,s,r,e[12],2368359562,20),r=J(r,n,i,s,e[5],4294588738,4),s=J(s,r,n,i,e[8],2272392833,11),i=J(i,s,r,n,e[11],1839030562,16),n=J(n,i,s,r,e[14],4259657740,23),r=J(r,n,i,s,e[1],2763975236,4),s=J(s,r,n,i,e[4],1272893353,11),i=J(i,s,r,n,e[7],4139469664,16),n=J(n,i,s,r,e[10],3200236656,23),r=J(r,n,i,s,e[13],681279174,4),s=J(s,r,n,i,e[0],3936430074,11),i=J(i,s,r,n,e[3],3572445317,16),n=J(n,i,s,r,e[6],76029189,23),r=J(r,n,i,s,e[9],3654602809,4),s=J(s,r,n,i,e[12],3873151461,11),i=J(i,s,r,n,e[15],530742520,16),n=J(n,i,s,r,e[2],3299628645,23),r=ee(r,n,i,s,e[0],4096336452,6),s=ee(s,r,n,i,e[7],1126891415,10),i=ee(i,s,r,n,e[14],2878612391,15),n=ee(n,i,s,r,e[5],4237533241,21),r=ee(r,n,i,s,e[12],1700485571,6),s=ee(s,r,n,i,e[3],2399980690,10),i=ee(i,s,r,n,e[10],4293915773,15),n=ee(n,i,s,r,e[1],2240044497,21),r=ee(r,n,i,s,e[8],1873313359,6),s=ee(s,r,n,i,e[15],4264355552,10),i=ee(i,s,r,n,e[6],2734768916,15),n=ee(n,i,s,r,e[13],1309151649,21),r=ee(r,n,i,s,e[4],4149444226,6),s=ee(s,r,n,i,e[11],3174756917,10),i=ee(i,s,r,n,e[2],718787259,15),n=ee(n,i,s,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0};jt.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=fa.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};function Ft(e,t){return e<<t|e>>>32-t}function Q(e,t,r,n,i,s,o){return Ft(e+(t&r|~t&n)+i+s|0,o)+t|0}function z(e,t,r,n,i,s,o){return Ft(e+(t&n|r&~n)+i+s|0,o)+t|0}function J(e,t,r,n,i,s,o){return Ft(e+(t^r^n)+i+s|0,o)+t|0}function ee(e,t,r,n,i,s,o){return Ft(e+(r^(t|~n))+i+s|0,o)+t|0}var ca=jt,yr=ct.Buffer,la=ce,wi=Si,da=new Array(16),Xe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],$e=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],We=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ge=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ye=[0,1518500249,1859775393,2400959708,2840853838],Ve=[1352829926,1548603684,1836072691,2053994217,0];function Ht(){wi.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}la(Ht,wi);Ht.prototype._update=function(){for(var e=da,t=0;t<16;++t)e[t]=this._block.readInt32LE(t*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,c=this._a|0,l=this._b|0,d=this._c|0,b=this._d|0,y=this._e|0,v=0;v<80;v+=1){var h,g;v<16?(h=un(r,n,i,s,o,e[Xe[v]],Ye[0],We[v]),g=hn(c,l,d,b,y,e[$e[v]],Ve[0],Ge[v])):v<32?(h=cn(r,n,i,s,o,e[Xe[v]],Ye[1],We[v]),g=dn(c,l,d,b,y,e[$e[v]],Ve[1],Ge[v])):v<48?(h=ln(r,n,i,s,o,e[Xe[v]],Ye[2],We[v]),g=ln(c,l,d,b,y,e[$e[v]],Ve[2],Ge[v])):v<64?(h=dn(r,n,i,s,o,e[Xe[v]],Ye[3],We[v]),g=cn(c,l,d,b,y,e[$e[v]],Ve[3],Ge[v])):(h=hn(r,n,i,s,o,e[Xe[v]],Ye[4],We[v]),g=un(c,l,d,b,y,e[$e[v]],Ve[4],Ge[v])),r=o,o=s,s=Ee(i,10),i=n,n=h,c=y,y=b,b=Ee(d,10),d=l,l=g}var C=this._b+i+b|0;this._b=this._c+s+y|0,this._c=this._d+o+c|0,this._d=this._e+r+l|0,this._e=this._a+n+d|0,this._a=C};Ht.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=yr.alloc?yr.alloc(20):new yr(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};function Ee(e,t){return e<<t|e>>>32-t}function un(e,t,r,n,i,s,o,c){return Ee(e+(t^r^n)+s+o|0,c)+i|0}function cn(e,t,r,n,i,s,o,c){return Ee(e+(t&r|~t&n)+s+o|0,c)+i|0}function ln(e,t,r,n,i,s,o,c){return Ee(e+((t|~r)^n)+s+o|0,c)+i|0}function dn(e,t,r,n,i,s,o,c){return Ee(e+(t&n|r&~n)+s+o|0,c)+i|0}function hn(e,t,r,n,i,s,o,c){return Ee(e+(t^(r|~n))+s+o|0,c)+i|0}var ha=Ht,Ii=Fe.Buffer,Oi=Br.Transform,pa=Ot.StringDecoder,ga=ce;function fe(e){Oi.call(this),this.hashMode=typeof e=="string",this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}ga(fe,Oi);fe.prototype.update=function(e,t,r){typeof e=="string"&&(e=Ii.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};fe.prototype.setAutoPadding=function(){};fe.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};fe.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};fe.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};fe.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){n=i}finally{r(n)}};fe.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)};fe.prototype._finalOrDigest=function(e){var t=this.__final()||Ii.alloc(0);return e&&(t=this._toString(t,e,!0)),t};fe.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new pa(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var ya=fe,va=ce,_a=ca,ma=ha,Ta=ts,Di=ya;function kt(e){Di.call(this,"digest"),this._hash=e}va(kt,Di);kt.prototype._update=function(e){this._hash.update(e)};kt.prototype._final=function(){return this._hash.digest()};var ba=function(t){return t=t.toLowerCase(),t==="md5"?new _a:t==="rmd160"||t==="ripemd160"?new ma:new kt(Ta(t))},bt=Fe.Buffer;function Ca(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,c=e.charAt(0),l=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function b(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=bt.from(h)),!bt.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var g=0,C=0,E=0,S=h.length;E!==S&&h[E]===0;)E++,g++;for(var D=(S-E)*d+1>>>0,I=new Uint8Array(D);E!==S;){for(var w=h[E],M=0,B=D-1;(w!==0||M<C)&&B!==-1;B--,M++)w+=256*I[B]>>>0,I[B]=w%o>>>0,w=w/o>>>0;if(w!==0)throw new Error("Non-zero carry");C=M,E++}for(var f=D-C;f!==D&&I[f]===0;)f++;for(var p=c.repeat(g);f<D;++f)p+=e.charAt(I[f]);return p}function y(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return bt.alloc(0);for(var g=0,C=0,E=0;h[g]===c;)C++,g++;for(var S=(h.length-g)*l+1>>>0,D=new Uint8Array(S);h[g];){var I=t[h.charCodeAt(g)];if(I===255)return;for(var w=0,M=S-1;(I!==0||w<E)&&M!==-1;M--,w++)I+=o*D[M]>>>0,D[M]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");E=w,g++}for(var B=S-E;B!==S&&D[B]===0;)B++;var f=bt.allocUnsafe(C+(S-B));f.fill(0,0,C);for(var p=C;B!==S;)f[p++]=D[B++];return f}function v(h){var g=y(h);if(g)return g;throw new Error("Non-base"+o+" character")}return{encode:b,decodeUnsafe:y,decode:v}}var Ea=Ca,Sa=Ea,Ra="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",wa=Sa(Ra),vr=wa,Ia=Fe.Buffer,Oa=function(e){function t(s){var o=e(s);return vr.encode(Ia.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),c=s.slice(-4),l=e(o);if(!(c[0]^l[0]|c[1]^l[1]|c[2]^l[2]|c[3]^l[3]))return o}function n(s){var o=vr.decodeUnsafe(s);if(o)return r(o)}function i(s){var o=vr.decode(s),c=r(o);if(!c)throw new Error("Invalid checksum");return c}return{encode:t,decode:i,decodeUnsafe:n}},pn=ba,Da=Oa;function Pa(e){var t=pn("sha256").update(e).digest();return pn("sha256").update(t).digest()}var Ba=Da(Pa),Pt={},$={},ue={},qt={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.InvalidChecksumError=ne.InvalidSequenceComponentError=ne.InvalidTypeError=ne.InvalidPathLengthError=ne.InvalidSchemeError=void 0;class Aa extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}ne.InvalidSchemeError=Aa;class Ma extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}ne.InvalidPathLengthError=Ma;class Na extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}ne.InvalidTypeError=Na;class La extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}ne.InvalidSequenceComponentError=La;class xa extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}ne.InvalidChecksumError=xa;Object.defineProperty(qt,"__esModule",{value:!0});const Ua=ne,Ka=Ar,gn=rs;class Bt{constructor(t,r="bytes"){if(this._cborPayload=t,this._type=r,!Ka.isURType(this._type))throw new Ua.InvalidTypeError}static fromBuffer(t){return new Bt(gn.cborEncode(t))}static from(t,r){return Bt.fromBuffer(Buffer.from(t,r))}decodeCBOR(){return gn.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(t){return this.type===t.type&&this.cbor.equals(t.cbor)}}qt.default=Bt;var Kr={},dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.FountainDecoderPart=void 0;const Be=Ar,ja=ns,Fa=ne;class Je{constructor(t,r){this._indexes=t,this._fragment=r}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(t){const r=ja.chooseFragments(t.seqNum,t.seqLength,t.checksum),n=t.fragment;return new Je(r,n)}isSimple(){return this.indexes.length===1}}dt.FountainDecoderPart=Je;class Xt{constructor(){this.result=void 0,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(t){if(this.expectedPartIndexes.length===0)[...new Array(t.seqLength)].forEach((r,n)=>this.expectedPartIndexes.push(n)),this.expectedMessageLength=t.messageLength,this.expectedChecksum=t.checksum,this.expectedFragmentLength=t.fragment.length;else if(this.expectedPartIndexes.length!==t.seqLength||this.expectedMessageLength!==t.messageLength||this.expectedChecksum!==t.checksum||this.expectedFragmentLength!==t.fragment.length)return!1;return!0}reducePartByPart(t,r){if(Be.arrayContains(t.indexes,r.indexes)){const n=Be.setDifference(t.indexes,r.indexes),i=Be.bufferXOR(t.fragment,r.fragment);return new Je(n,i)}else return t}reduceMixedBy(t){const r=[];this.mixedParts.map(({value:n})=>this.reducePartByPart(n,t)).forEach(n=>{n.isSimple()?this.queuedParts.push(n):r.push({key:n.indexes,value:n})}),this.mixedParts=r}processSimplePart(t){const r=t.indexes[0];if(!this.receivedPartIndexes.includes(r))if(this.simpleParts.push({key:t.indexes,value:t}),this.receivedPartIndexes.push(r),Be.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const n=this.simpleParts.map(({value:o})=>o).sort((o,c)=>o.indexes[0]-c.indexes[0]),i=Xt.joinFragments(n.map(o=>o.fragment),this.expectedMessageLength);Be.getCRC(i)===this.expectedChecksum?this.result=i:this.error=new Fa.InvalidChecksumError}else this.reduceMixedBy(t)}processMixedPart(t){if(this.mixedParts.some(({key:n})=>Be.arraysEqual(n,t.indexes)))return;let r=this.simpleParts.reduce((n,{value:i})=>this.reducePartByPart(n,i),t);r=this.mixedParts.reduce((n,{value:i})=>this.reducePartByPart(n,i),r),r.isSimple()?this.queuedParts.push(r):(this.reduceMixedBy(r),this.mixedParts.push({key:r.indexes,value:r}))}processQueuedItem(){if(this.queuedParts.length===0)return;const t=this.queuedParts.shift();t.isSimple()?this.processSimplePart(t):this.processMixedPart(t)}receivePart(t){if(this.isComplete()||!this.validatePart(t))return!1;const r=Je.fromEncoderPart(t);for(this.lastPartIndexes=r.indexes,this.queuedParts.push(r);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return this.result!==void 0&&this.result.length>0}isSuccess(){return!!(this.error===void 0&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:Buffer.from([])}isFailure(){return this.error!==void 0}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const t=this.expectedPartCount();return t===0?0:Math.min(.99,this.processedPartsCount/(t*1.75))}getProgress(){if(this.isComplete())return 1;const t=this.expectedPartCount();return t===0?0:this.receivedPartIndexes.length/t}}dt.default=Xt;Xt.joinFragments=(e,t)=>Buffer.concat(e).slice(0,t);var $t=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kr,"__esModule",{value:!0});const Ha=$t(dt),Ct=$t(is),ka=$t(ss()),Et=Ar,de=ne,_r=$t(qt),qa=os;class Ae{constructor(t=new Ha.default,r="bytes"){this.fountainDecoder=t,this.type=r,ka.default(Et.isURType(r),"Invalid UR type"),this.expected_type=""}static decodeBody(t,r){const n=Ct.default.decode(r,Ct.default.STYLES.MINIMAL);return new _r.default(Buffer.from(n,"hex"),t)}validatePart(t){return this.expected_type?this.expected_type===t:Et.isURType(t)?(this.expected_type=t,!0):!1}static decode(t){const[r,n]=this.parse(t);if(n.length===0)throw new de.InvalidPathLengthError;const i=n[0];return Ae.decodeBody(r,i)}static parse(t){const r=t.toLowerCase();if(r.slice(0,3)!=="ur:")throw new de.InvalidSchemeError;const i=r.slice(3).split("/"),s=i[0];if(i.length<2)throw new de.InvalidPathLengthError;if(!Et.isURType(s))throw new de.InvalidTypeError;return[s,i.slice(1)]}static parseSequenceComponent(t){const r=t.split("-");if(r.length!==2)throw new de.InvalidSequenceComponentError;const n=Et.toUint32(Number(r[0])),i=Number(r[1]);if(n<1||i<1)throw new de.InvalidSequenceComponentError;return[n,i]}receivePart(t){if(this.result!==void 0)return!1;const[r,n]=Ae.parse(t);if(!this.validatePart(r))return!1;if(n.length===1)return this.result=Ae.decodeBody(r,n[0]),!0;if(n.length!==2)throw new de.InvalidPathLengthError;const[i,s]=n,[o,c]=Ae.parseSequenceComponent(i),l=Ct.default.decode(s,Ct.default.STYLES.MINIMAL),d=qa.FountainEncoderPart.fromCBOR(l);return o!==d.seqNum||c!==d.seqLength||!this.fountainDecoder.receivePart(d)?!1:(this.fountainDecoder.isSuccess()?this.result=new _r.default(this.fountainDecoder.resultMessage(),r):this.fountainDecoder.isFailure()&&(this.error=new de.InvalidSchemeError),!0)}resultUR(){return this.result?this.result:new _r.default(Buffer.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return this.error!==void 0}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}var Xa=Kr.default=Ae,jr=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ue,"__esModule",{value:!0});ue.URDecoder=ue.UREncoder=ue.UR=void 0;const $a=jr(qt);ue.UR=$a.default;const Wa=jr(as);ue.UREncoder=Wa.default;const Ga=jr(Kr);ue.URDecoder=Ga.default;Object.defineProperty($,"__esModule",{value:!0});$.RegistryItem=void 0;const yn=ue,Ya=X;class Va{constructor(){this.toCBOR=()=>{if(this.toDataItem()===void 0)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,Ya.encodeDataItem)(this.toDataItem())},this.toUR=()=>new yn.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(t,r,n)=>{const i=this.toUR();return new yn.UREncoder(i,t,r,n)}}}$.RegistryItem=Va;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CryptoCoinInfo=e.Network=e.Type=void 0;const t=X,r=$,n=q;var i;(function(l){l.type="1",l.network="2"})(i||(i={}));var s;(function(l){l[l.bitcoin=0]="bitcoin"})(s=e.Type||(e.Type={}));var o;(function(l){l[l.mainnet=0]="mainnet",l[l.testnet=1]="testnet"})(o=e.Network||(e.Network={}));class c extends r.RegistryItem{constructor(d,b){super(),this.type=d,this.network=b,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||s.bitcoin,this.getNetwork=()=>this.network||o.mainnet,this.toDataItem=()=>{const y={};return this.type&&(y[i.type]=this.type),this.network&&(y[i.network]=this.network),new t.DataItem(y)}}}e.CryptoCoinInfo=c,c.fromDataItem=l=>{const d=l.getData(),b=d[i.type],y=d[i.network];return new c(b,y)},c.fromCBOR=l=>{const d=(0,t.decodeToDataItem)(l);return c.fromDataItem(d)}})(Pt);var Se={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.PathComponent=void 0;class Wt{constructor(t){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=t.index,this.hardened=t.hardened,this.index!==void 0?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&Wt.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}Ue.PathComponent=Wt;Wt.HARDENED_BIT=2147483648;Object.defineProperty(Se,"__esModule",{value:!0});Se.CryptoKeypath=void 0;const Pi=X,vn=Ue,Za=$,Qa=q;var pe;(function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"})(pe||(pe={}));class et extends Za.RegistryItem{constructor(t=[],r,n){super(),this.components=t,this.sourceFingerprint=r,this.depth=n,this.getRegistryType=()=>Qa.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>this.components.length===0?void 0:this.components.map(s=>`${s.isWildcard()?"*":s.getIndex()}${s.isHardened()?"'":""}`).join("/"),this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const i={},s=[];return this.components&&this.components.forEach(o=>{o.isWildcard()?s.push([]):s.push(o.getIndex()),s.push(o.isHardened())}),i[pe.components]=s,this.sourceFingerprint&&(i[pe.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==void 0&&(i[pe.depth]=this.depth),new Pi.DataItem(i)}}}Se.CryptoKeypath=et;et.fromDataItem=e=>{const t=e.getData(),r=[],n=t[pe.components];if(n)for(let c=0;c<n.length;c+=2){const l=n[c+1],d=n[c];typeof d=="number"?r.push(new vn.PathComponent({index:d,hardened:l})):r.push(new vn.PathComponent({hardened:l}))}const i=t[pe.source_fingerprint];let s;i&&(s=Buffer.alloc(4),s.writeUInt32BE(i,0));const o=t[pe.depth];return new et(r,s,o)};et.fromCBOR=e=>{const t=(0,Pi.decodeToDataItem)(e);return et.fromDataItem(t)};Object.defineProperty(ye,"__esModule",{value:!0});ye.CryptoHDKey=void 0;const za=Ba,Ja=Pt,_n=Se,Bi=X,ef=$,tf=q;var j;(function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"})(j||(j={}));class tt extends ef.RegistryItem{constructor(t){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var r,n,i;let s,o,c=0,l=Buffer.alloc(4).fill(0);if(this.isMaster())s=Buffer.from("0488ADE4","hex"),o=0,c=0;else{o=((r=this.getOrigin())===null||r===void 0?void 0:r.getComponents().length)||((n=this.getOrigin())===null||n===void 0?void 0:n.getDepth());const h=(i=this.getOrigin())===null||i===void 0?void 0:i.getComponents(),g=h[h.length-1];g&&(c=g.isHardened()?g.getIndex()+2147483648:g.getIndex(),this.getParentFingerprint()&&(l=this.getParentFingerprint())),this.isPrivateKey()?s=Buffer.from("0488ADE4","hex"):s=Buffer.from("0488B21E","hex")}const d=Buffer.alloc(1);d.writeUInt8(o,0);const b=Buffer.alloc(4);b.writeUInt32BE(c,0);const y=this.getChainCode(),v=this.getKey();return(0,za.encode)(Buffer.concat([s,d,l,b,y,v]))},this.getRegistryType=()=>tf.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var r,n,i,s,o,c,l;let d="";return this.getOrigin()&&!((r=this.getOrigin())===null||r===void 0)&&r.getSourceFingerprint()&&!((n=this.getOrigin())===null||n===void 0)&&n.getPath()&&(d+=`${(s=(i=this.getOrigin())===null||i===void 0?void 0:i.getSourceFingerprint())===null||s===void 0?void 0:s.toString("hex")}/${(o=this.getOrigin())===null||o===void 0?void 0:o.getPath()}`),d+=this.getBip32Key(),this.getChildren()&&!((c=this.getChildren())===null||c===void 0)&&c.getPath()&&(d+=`/${(l=this.getChildren())===null||l===void 0?void 0:l.getPath()}`),d},this.setupMasterKey=r=>{this.master=!0,this.key=r.key,this.chainCode=r.chainCode},this.setupDeriveKey=r=>{this.master=!1,this.privateKey=r.isPrivateKey,this.key=r.key,this.chainCode=r.chainCode,this.useInfo=r.useInfo,this.origin=r.origin,this.children=r.children,this.parentFingerprint=r.parentFingerprint,this.name=r.name,this.note=r.note},this.toDataItem=()=>{const r={};if(this.master)r[j.is_master]=!0,r[j.key_data]=this.key,r[j.chain_code]=this.chainCode;else{if(this.privateKey!==void 0&&(r[j.is_private]=this.privateKey),r[j.key_data]=this.key,this.chainCode&&(r[j.chain_code]=this.chainCode),this.useInfo){const n=this.useInfo.toDataItem();n.setTag(this.useInfo.getRegistryType().getTag()),r[j.use_info]=n}if(this.origin){const n=this.origin.toDataItem();n.setTag(this.origin.getRegistryType().getTag()),r[j.origin]=n}if(this.children){const n=this.children.toDataItem();n.setTag(this.children.getRegistryType().getTag()),r[j.children]=n}this.parentFingerprint&&(r[j.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==void 0&&(r[j.name]=this.name),this.note!==void 0&&(r[j.note]=this.note)}return new Bi.DataItem(r)},t.isMaster?this.setupMasterKey(t):this.setupDeriveKey(t)}}ye.CryptoHDKey=tt;tt.fromDataItem=e=>{const t=e.getData(),r=!!t[j.is_master],n=t[j.is_private],i=t[j.key_data],s=t[j.chain_code],o=t[j.use_info]?Ja.CryptoCoinInfo.fromDataItem(t[j.use_info]):void 0,c=t[j.origin]?_n.CryptoKeypath.fromDataItem(t[j.origin]):void 0,l=t[j.children]?_n.CryptoKeypath.fromDataItem(t[j.children]):void 0,d=t[j.parent_fingerprint];let b;d&&(b=Buffer.alloc(4),b.writeUInt32BE(d,0));const y=t[j.name],v=t[j.note];return new tt({isMaster:r,isPrivateKey:n,key:i,chainCode:s,useInfo:o,origin:c,children:l,parentFingerprint:b,name:y,note:v})};tt.fromCBOR=e=>{const t=(0,Bi.decodeToDataItem)(e);return tt.fromDataItem(t)};var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.CryptoECKey=void 0;const Ai=X,rf=$,nf=q;var ge;(function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"})(ge||(ge={}));class rt extends rf.RegistryItem{constructor(t){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>nf.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const r={};return this.curve&&(r[ge.curve]=this.curve),this.privateKey!==void 0&&(r[ge.private]=this.privateKey),r[ge.data]=this.data,new Ai.DataItem(r)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=t.data,this.curve=t.curve,this.privateKey=t.privateKey||void 0}}Re.CryptoECKey=rt;rt.fromDataItem=e=>{const t=e.getData(),r=t[ge.curve],n=t[ge.private],i=t[ge.data];if(!i)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new rt({data:i,curve:r,privateKey:n})};rt.fromCBOR=e=>{const t=(0,Ai.decodeToDataItem)(e);return rt.fromDataItem(t)};var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.Bytes=void 0;const Mi=X,sf=$,of=q;class nt extends sf.RegistryItem{constructor(t){super(),this.bytes=t,this.getRegistryType=()=>of.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new Mi.DataItem(this.bytes)}}Gt.Bytes=nt;nt.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new nt(t)};nt.fromCBOR=e=>{const t=(0,Mi.decodeToDataItem)(e);return nt.fromDataItem(t)};var it={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.MultiKey=void 0;const af=Re,ff=ye,uf=He,cf=$,mn=q;var je;(function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"})(je||(je={}));class Rr extends cf.RegistryItem{constructor(t,r){super(),this.threshold=t,this.keys=r,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const n={};n[je.threshold]=this.threshold;const i=this.keys.map(s=>{const o=s.toDataItem();return o.setTag(s.getRegistryType().getTag()),o});return n[je.keys]=i,new uf.DataItem(n)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map(n=>n.getOutputDescriptorContent()).join(",")].join(",")}}Ke.MultiKey=Rr;Rr.fromDataItem=e=>{const t=e.getData(),r=t[je.threshold],n=t[je.keys],i=[];return n.forEach(s=>{s.getTag()===mn.RegistryTypes.CRYPTO_HDKEY.getTag()?i.push(ff.CryptoHDKey.fromDataItem(s)):s.getTag()===mn.RegistryTypes.CRYPTO_ECKEY.getTag()&&i.push(af.CryptoECKey.fromDataItem(s))}),new Rr(r,i)};Object.defineProperty(it,"__esModule",{value:!0});it.CryptoOutput=void 0;const wr=Re,Ir=ye,Fr=X,Ni=Ke,lf=$,Li=q,mr=Lt;class Ce extends lf.RegistryItem{constructor(t,r){super(),this.scriptExpressions=t,this.cryptoKey=r,this.getRegistryType=()=>Li.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>{if(this.cryptoKey instanceof Ir.CryptoHDKey)return this.cryptoKey},this.getECKey=()=>{if(this.cryptoKey instanceof wr.CryptoECKey)return this.cryptoKey},this.getMultiKey=()=>{if(this.cryptoKey instanceof Ni.MultiKey)return this.cryptoKey},this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=n=>n>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[n].getExpression()}(${this._toOutputDescriptor(n+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let n=this.cryptoKey.toDataItem();return(this.cryptoKey instanceof wr.CryptoECKey||this.cryptoKey instanceof Ir.CryptoHDKey)&&n.setTag(this.cryptoKey.getRegistryType().getTag()),[...this.scriptExpressions].reverse().forEach(s=>{const o=s.getTag();n.getTag()===void 0?n.setTag(o):n=new Fr.DataItem(n,o)}),n}}}it.CryptoOutput=Ce;Ce.fromDataItem=e=>{const t=[];let r=e;for(;;){let s=r.getTag();const o=mr.ScriptExpression.fromTag(s);if(o)if(t.push(o),r.getData()instanceof Fr.DataItem)r=r.getData(),s=r.getTag();else break;else break}const n=t.length;if(n>0&&(t[n-1].getExpression()===mr.ScriptExpressions.MULTISIG.getExpression()||t[n-1].getExpression()===mr.ScriptExpressions.SORTED_MULTISIG.getExpression())){const s=Ni.MultiKey.fromDataItem(r);return new Ce(t,s)}if(r.getTag()===Li.RegistryTypes.CRYPTO_HDKEY.getTag()){const s=Ir.CryptoHDKey.fromDataItem(r);return new Ce(t,s)}else{const s=wr.CryptoECKey.fromDataItem(r);return new Ce(t,s)}};Ce.fromCBOR=e=>{const t=(0,Fr.decodeToDataItem)(e);return Ce.fromDataItem(t)};var st={};Object.defineProperty(st,"__esModule",{value:!0});st.CryptoPSBT=void 0;const xi=X,df=$,hf=q;class ot extends df.RegistryItem{constructor(t){super(),this.psbt=t,this.getRegistryType=()=>hf.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new xi.DataItem(this.psbt)}}st.CryptoPSBT=ot;ot.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new ot(t)};ot.fromCBOR=e=>{const t=(0,xi.decodeToDataItem)(e);return ot.fromDataItem(t)};var Ze={},Tn;function bn(){if(Tn)return Ze;Tn=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.CryptoAccount=void 0;const e=Yt(),t=X,r=$,n=q;var i;(function(o){o[o.masterFingerprint=1]="masterFingerprint",o[o.outputDescriptors=2]="outputDescriptors"})(i||(i={}));let s=class extends r.RegistryItem{constructor(c,l){super(),this.masterFingerprint=c,this.outputDescriptors=l,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const d={};return this.masterFingerprint&&(d[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(d[i.outputDescriptors]=this.outputDescriptors.map(b=>b.toDataItem())),new t.DataItem(d)}}};return Ze.CryptoAccount=s,s.fromDataItem=o=>{const c=o.getData(),l=Buffer.alloc(4),d=c[i.masterFingerprint];d&&l.writeUInt32BE(d,0);const y=c[i.outputDescriptors].map(v=>e.CryptoOutput.fromDataItem(v));return new s(l,y)},s.fromCBOR=o=>{const c=(0,t.decodeToDataItem)(o);return s.fromDataItem(c)},Ze}var Qe={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.UnknownURTypeError=void 0;class pf extends Error{constructor(t){super(t)}}ht.UnknownURTypeError=pf;var Cn;function En(){if(Cn)return Qe;Cn=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.URRegistryDecoder=void 0;const e=ue,t=Yt(),r=q,n=ht;class i extends e.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const o=this.resultUR();switch(o.type){case r.RegistryTypes.BYTES.getType():return t.Bytes.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_HDKEY.getType():return t.CryptoHDKey.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_KEYPATH.getType():return t.CryptoKeypath.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_COIN_INFO.getType():return t.CryptoCoinInfo.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_ECKEY.getType():return t.CryptoECKey.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_OUTPUT.getType():return t.CryptoOutput.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_PSBT.getType():return t.CryptoPSBT.fromCBOR(o.cbor);case r.RegistryTypes.CRYPTO_ACCOUNT.getType():return t.CryptoAccount.fromCBOR(o.cbor);default:throw new n.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${o.type} is not supported now`)}}}}return Qe.URRegistryDecoder=i,Qe}var at={};Object.defineProperty(at,"__esModule",{value:!0});at.CryptoMultiAccounts=void 0;const gf=q,yf=ye,vf=$,Ui=X;var oe;(function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"})(oe||(oe={}));class ft extends vf.RegistryItem{constructor(t,r,n,i,s){super(),this.masterFingerprint=t,this.keys=r,this.device=n,this.deviceId=i,this.version=s,this.getRegistryType=()=>gf.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const o={};return this.masterFingerprint&&(o[oe.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(o[oe.keys]=this.keys.map(c=>{const l=c.toDataItem();return l.setTag(c.getRegistryType().getTag()),l})),this.device&&(o[oe.device]=this.device),this.deviceId&&(o[oe.deviceId]=this.deviceId),this.version&&(o[oe.version]=this.version),new Ui.DataItem(o)}}}at.CryptoMultiAccounts=ft;ft.fromDataItem=e=>{const t=e.getData(),r=Buffer.alloc(4),n=t[oe.masterFingerprint];n&&r.writeUInt32BE(n,0);const s=t[oe.keys].map(d=>yf.CryptoHDKey.fromDataItem(d)),o=t[oe.device],c=t[oe.deviceId],l=t[oe.version];return new ft(r,s,o,c,l)};ft.fromCBOR=e=>{const t=(0,Ui.decodeToDataItem)(e);return ft.fromDataItem(t)};var Ki={},pt={},Hr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyDerivationSchema=e.DerivationAlgorithm=e.Curve=void 0;const t=q,r=$,n=X,i=Se;var s;(function(d){d[d.keyPath=1]="keyPath",d[d.curve=2]="curve",d[d.algo=3]="algo"})(s||(s={}));var o;(function(d){d[d.secp256k1=0]="secp256k1",d[d.ed25519=1]="ed25519"})(o=e.Curve||(e.Curve={}));var c;(function(d){d[d.slip10=0]="slip10",d[d.bip32ed25519=1]="bip32ed25519"})(c=e.DerivationAlgorithm||(e.DerivationAlgorithm={}));class l extends r.RegistryItem{constructor(b,y=o.secp256k1,v=c.slip10){super(),this.keypath=b,this.curve=y,this.algo=v,this.getRegistryType=()=>t.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const h={},g=this.getKeypath().toDataItem();return g.setTag(this.getKeypath().getRegistryType().getTag()),h[s.keyPath]=g,h[s.curve]=this.curve,h[s.algo]=this.algo,new n.DataItem(h)}}}e.KeyDerivationSchema=l,l.fromDataItem=d=>{const b=d.getData(),y=i.CryptoKeypath.fromDataItem(b[s.keyPath]),v=b[s.curve],h=b[s.algo];return new l(y,v,h)},l.fromCBOR=d=>{const b=(0,n.decodeToDataItem)(d);return l.fromDataItem(b)}})(Hr);Object.defineProperty(pt,"__esModule",{value:!0});pt.KeyDerivation=void 0;const _f=q,mf=$,ji=X,Tf=Hr;var At;(function(e){e[e.schemas=1]="schemas"})(At||(At={}));class ut extends mf.RegistryItem{constructor(t){super(),this.schemas=t,this.getRegistryType=()=>_f.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const r={};return r[At.schemas]=this.schemas.map(n=>{const i=n.toDataItem();return i.setTag(n.getRegistryType().getTag()),i}),new ji.DataItem(r)}}}pt.KeyDerivation=ut;ut.fromDataItem=e=>{const r=e.getData()[At.schemas].map(n=>Tf.KeyDerivationSchema.fromDataItem(n));return new ut(r)};ut.fromCBOR=e=>{const t=(0,ji.decodeToDataItem)(e);return ut.fromDataItem(t)};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QRHardwareCall=e.QRHardwareCallType=void 0;const t=q,r=$,n=X,i=pt;var s;(function(l){l[l.type=1]="type",l[l.params=2]="params",l[l.origin=3]="origin"})(s||(s={}));var o;(function(l){l[l.KeyDerivation=0]="KeyDerivation"})(o=e.QRHardwareCallType||(e.QRHardwareCallType={}));class c extends r.RegistryItem{constructor(d,b,y){super(),this.type=d,this.params=b,this.origin=y,this.getRegistryType=()=>t.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const v={};v[s.type]=this.type;const h=this.params.toDataItem();return h.setTag(this.params.getRegistryType().getTag()),v[s.params]=h,this.origin&&(v[s.origin]=this.origin),new n.DataItem(v)}}}e.QRHardwareCall=c,c.fromDataItem=l=>{const d=l.getData(),b=d[s.type]||o.KeyDerivation;let y;switch(b){case o.KeyDerivation:y=i.KeyDerivation.fromDataItem(d[s.params])}const v=d[s.origin];return new c(b,y,v)},c.fromCBOR=l=>{const d=(0,n.decodeToDataItem)(l);return c.fromDataItem(d)}})(Ki);var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});var Sn;function Yt(){return Sn||(Sn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Buffer=e.extend=e.PathComponent=e.ScriptExpressions=e.MultiKey=e.CryptoPSBT=e.CryptoOutput=e.CryptoECKey=e.CryptoCoinInfoNetwork=e.CryptoCoinInfoType=e.CryptoCoinInfo=e.CryptoKeypath=e.CryptoMultiAccounts=e.CryptoHDKey=e.CryptoAccount=e.Bytes=e.URRegistryDecoder=e.DataItem=void 0;const t=Vs,r=ct;Object.defineProperty(e,"Buffer",{enumerable:!0,get:function(){return r.Buffer}});const n=ye;Object.defineProperty(e,"CryptoHDKey",{enumerable:!0,get:function(){return n.CryptoHDKey}});const i=Se;Object.defineProperty(e,"CryptoKeypath",{enumerable:!0,get:function(){return i.CryptoKeypath}});const s=Pt;Object.defineProperty(e,"CryptoCoinInfo",{enumerable:!0,get:function(){return s.CryptoCoinInfo}}),Object.defineProperty(e,"CryptoCoinInfoType",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(e,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return s.Network}});const o=Re;Object.defineProperty(e,"CryptoECKey",{enumerable:!0,get:function(){return o.CryptoECKey}});const c=Gt;Object.defineProperty(e,"Bytes",{enumerable:!0,get:function(){return c.Bytes}});const l=it;Object.defineProperty(e,"CryptoOutput",{enumerable:!0,get:function(){return l.CryptoOutput}});const d=st;Object.defineProperty(e,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const b=bn();Object.defineProperty(e,"CryptoAccount",{enumerable:!0,get:function(){return b.CryptoAccount}});const y=En();Object.defineProperty(e,"URRegistryDecoder",{enumerable:!0,get:function(){return y.URRegistryDecoder}});const v=Ke;Object.defineProperty(e,"MultiKey",{enumerable:!0,get:function(){return v.MultiKey}});const h=Lt;Object.defineProperty(e,"ScriptExpressions",{enumerable:!0,get:function(){return h.ScriptExpressions}});const g=Ue;Object.defineProperty(e,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const C=$,E=q,S=X;var D=X;Object.defineProperty(e,"DataItem",{enumerable:!0,get:function(){return D.DataItem}});const I=Le,w=at;Object.defineProperty(e,"CryptoMultiAccounts",{enumerable:!0,get:function(){return w.CryptoMultiAccounts}});const M={URRegistryDecoder:y.URRegistryDecoder,Bytes:c.Bytes,CryptoAccount:b.CryptoAccount,CryptoHDKey:n.CryptoHDKey,CryptoMultiAccounts:w.CryptoMultiAccounts,CryptoKeypath:i.CryptoKeypath,CryptoCoinInfo:s.CryptoCoinInfo,CryptoCoinInfoType:s.Type,CryptoCoinInfoNetwork:s.Network,CryptoECKey:o.CryptoECKey,CryptoOutput:l.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:v.MultiKey,ScriptExpressions:h.ScriptExpressions,PathComponent:g.PathComponent},B={addReader:S.addReader,addSemanticDecode:S.addSemanticDecode,addSemanticEncode:S.addSemanticEncode,addWriter:S.addWriter,patchTags:I.patchTags},f={RegistryTypes:E.RegistryTypes,RegistryItem:C.RegistryItem,RegistryType:E.RegistryType,decodeToDataItem:S.decodeToDataItem,encodeDataItem:S.encodeDataItem,cbor:B};e.extend=f,(0,t.__exportStar)(ht,e),(0,t.__exportStar)(En(),e),(0,t.__exportStar)(X,e),(0,t.__exportStar)(bn(),e),(0,t.__exportStar)(st,e),(0,t.__exportStar)(ye,e),(0,t.__exportStar)(at,e),(0,t.__exportStar)(Ki,e),(0,t.__exportStar)(pt,e),(0,t.__exportStar)(Hr,e),(0,t.__exportStar)(it,e),(0,t.__exportStar)(Pt,e),(0,t.__exportStar)(Re,e),(0,t.__exportStar)(Ke,e),(0,t.__exportStar)(Se,e),(0,t.__exportStar)(ri,e),(0,t.__exportStar)(Ue,e),(0,t.__exportStar)($,e),(0,t.__exportStar)(q,e),(0,t.__exportStar)(Fi,e),(0,t.__exportStar)(Le,e),e.default=M}(or)),or}const Hi=In(Fs);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Yt(),r=Hi;const n={TRON_SIGN_REQUEST:new t.RegistryType("ton-sign-request",7201),TRON_SIGNATURE:new t.RegistryType("ton-signature",7202)},{decodeToDataItem:i,RegistryTypes:s}=t.extend;var o,c;(function(h){h[h.requestId=1]="requestId",h[h.signData=2]="signData",h[h.dataType=3]="dataType",h[h.derivationPath=4]="derivationPath",h[h.address=5]="address",h[h.origin=6]="origin"})(o||(o={})),(c=e.DataType||(e.DataType={}))[c.TRANSACTION=1]="TRANSACTION",c[c.SIGN_PROOF=2]="SIGN_PROOF";class l extends t.RegistryItem{constructor(g){super(),this.getRegistryType=()=>n.TRON_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDerivationPath=()=>this.derivationPath?this.derivationPath.getPath():void 0,this.getAddress=()=>this.address,this.getOrigin=()=>this.origin,this.getDataType=()=>this.dataType,this.toDataItem=()=>{const C={};if(C[o.signData]=this.signData,C[o.dataType]=this.dataType,this.derivationPath){const E=this.derivationPath.toDataItem();E.setTag(this.derivationPath.getRegistryType().getTag()),C[o.derivationPath]=E}return this.requestId&&(C[o.requestId]=new t.DataItem(this.requestId,s.UUID.getTag())),this.address&&(C[o.address]=this.address),this.origin&&(C[o.origin]=this.origin),new t.DataItem(C)},this.requestId=g.requestId,this.signData=g.signData,this.derivationPath=g.derivationPath,this.address=g.address,this.origin=g.origin,this.dataType=g.dataType}static parsePath(g,C){const E=g.replace(/[m|M]\//,"").split("/").map(S=>{const D=parseInt(S.replace("'",""));let I=!1;return S.endsWith("'")&&(I=!0),new t.PathComponent({index:D,hardened:I})});return new t.CryptoKeypath(E,Buffer.from(C,"hex"))}static constructTonRequest(g,C,E,S,D,I,w){return new l({requestId:S?Buffer.from(r.parse(S)):void 0,signData:g,dataType:C,derivationPath:w&&I?l.parsePath(w,I):void 0,address:E,origin:D})}}l.fromDataItem=h=>{const g=h.getData(),C=g[o.requestId]?g[o.requestId].getData():void 0,E=g[o.derivationPath]?t.CryptoKeypath.fromDataItem(g[o.derivationPath]):void 0;return new l({requestId:C,signData:g[o.signData],dataType:g[o.dataType],derivationPath:E,address:g[o.address],origin:g[o.origin]})},l.fromCBOR=h=>{const g=i(h);return l.fromDataItem(g)};const{RegistryTypes:d,decodeToDataItem:b}=t.extend;var y;(function(h){h[h.requestId=1]="requestId",h[h.signature=2]="signature",h[h.origin=3]="origin"})(y||(y={}));class v extends t.RegistryItem{constructor(g,C,E){super(),this.getRegistryType=()=>n.TRON_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const S={};return this.requestId&&(S[y.requestId]=new t.DataItem(this.requestId,d.UUID.getTag())),this.origin&&(S[y.origin]=this.origin),S[y.signature]=this.signature,new t.DataItem(S)},this.signature=g,this.requestId=C,this.origin=E}}v.fromDataItem=h=>{const g=h.getData(),C=g[y.signature];let E,S;return g[y.requestId]&&(E=g[y.requestId].getData()),g[y.origin]&&(S=g[y.origin]),new v(C,E,S)},v.fromCBOR=h=>{const g=b(h);return v.fromDataItem(g)},t.patchTags(Object.values(n).filter(h=>!!h.getTag()).map(h=>h.getTag())),Object.keys(t).forEach(function(h){h!=="default"&&Object.defineProperty(e,h,{enumerable:!0,get:function(){return t[h]}})}),e.TonSignRequest=l,e.TonSignature=v})(Mn);An.exports=Mn;var bf=An.exports,ki={},qi={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.getCoinSymbol=void 0;function Cf(e){var t;return(t={0:"BTC",2:"LTC",3:"DOGE",4:"RDD",5:"DASH",6:"PPC",7:"NMC",8:"FTC",9:"XCP",10:"BLK",11:"NSR",12:"NBT",13:"MZC",14:"VIA",15:"XCH",16:"RBY",17:"GRS",18:"DGC",19:"CCN",20:"DGB",22:"MONA",23:"CLAM",24:"XPM",25:"NEOS",26:"JBS",27:"ZRC",28:"VTC",29:"NXT",30:"BURST",31:"MUE",32:"ZOOM",33:"VASH",34:"CDN",35:"SDC",36:"PKB",37:"PND",38:"START",39:"MOIN",40:"EXP",41:"EMC2",42:"DCR",43:"XEM",44:"PART",45:"ARG",48:"SHR",49:"GCR",50:"NVC",51:"AC",52:"BTCD",53:"DOPE",54:"TPC",55:"AIB",56:"EDRC",57:"SYS",58:"SLR",59:"SMLY",60:"ETH",61:"ETC",62:"PSB",63:"LDCN",65:"XBC",66:"IOP",67:"NXS",68:"INSN",69:"OK",70:"BRIT",71:"CMP",72:"CRW",73:"BELA",74:"ICX",75:"FJC",76:"MIX",77:"XVG",78:"EFL",79:"CLUB",80:"RICHX",81:"POT",82:"QRK",83:"TRC",84:"GRC",85:"AUR",86:"IXC",87:"NLG",88:"BITB",89:"BTA",90:"XMY",91:"BSD",92:"UNO",93:"MTR",94:"GB",95:"SHM",96:"CRX",97:"BIQ",98:"EVO",99:"STO",100:"BIGUP",101:"GAME",102:"DLC",103:"ZYD",104:"DBIC",105:"STRAT",106:"SH",107:"MARS",108:"UBQ",109:"PTC",110:"NRO",111:"ARK",112:"USC",113:"THC",114:"LINX",115:"ECN",116:"DNR",117:"PINK",118:"ATOM",119:"PIVX",120:"FLASH",121:"ZEN",122:"PUT",123:"ZNY",124:"UNIFY",125:"XST",126:"BRK",127:"VC",128:"XMR",129:"VOX",130:"NAV",131:"FCT",132:"EC",133:"ZEC",134:"LSK",135:"STEEM",136:"XZC",137:"RBTC",139:"RPT",140:"LBC",141:"KMD",142:"BSQ",143:"RIC",144:"XRP",145:"BCH",146:"NEBL",147:"ZCL",148:"XLM",149:"NLC2",150:"WHL",151:"ERC",152:"DMD",153:"BTM",154:"BIO",155:"XWCC",156:"BTG",157:"BTC2X",158:"SSN",159:"TOA",160:"BTX",161:"ACC",162:"BCO",163:"ELLA",164:"PIRL",165:"XNO",166:"VIVO",167:"FRST",168:"HNC",169:"BUZZ",170:"MBRS",171:"HC",172:"HTML",173:"ODN",174:"ONX",175:"RVN",176:"GBX",177:"BTCZ",178:"POA",179:"NYC",180:"MXT",181:"WC",182:"MNX",183:"BTCP",184:"MUSIC",185:"BCA",186:"CRAVE",187:"STAK",188:"WBTC",189:"LCH",190:"EXCL",192:"LCC",193:"XFE",194:"EOS",195:"TRX",196:"KOBO",197:"HUSH",198:"BAN",199:"ETF",200:"OMNI",201:"BIFI",202:"UFO",203:"CNMC",204:"BCN",205:"RIN",206:"ATP",207:"EVT",208:"ATN",209:"BIS",210:"NEET",211:"BOPO",212:"OOT",213:"ALIAS",214:"MONK",215:"BOXY",216:"FLO",217:"MEC",218:"BTDX",219:"XAX",220:"ANON",221:"LTZ",222:"BITG",223:"ICP",224:"SMART",225:"XUEZ",226:"HLM",227:"WEB",228:"ACM",229:"NOS",230:"BITC",231:"HTH",232:"TZC",233:"VAR",234:"IOV",235:"FIO",236:"BSV",237:"DXN",238:"QRL",239:"PCX",240:"LOKI",242:"NIM",243:"SOV",244:"JCT",245:"SLP",246:"EWT",247:"UC",248:"EXOS",249:"ECA",250:"SOOM",251:"XRD",252:"FREE",253:"NPW",254:"BST",256:"NANO",257:"BTCC",259:"ZEST",260:"ABT",261:"PION",262:"DT3",263:"ZBUX",264:"KPL",265:"TPAY",266:"ZILLA",267:"ANK",268:"BCC",269:"HPB",270:"ONE",271:"SBC",272:"IPC",273:"DMTC",274:"OGC",275:"SHIT",276:"ANDES",277:"AREPA",278:"BOLI",279:"RIL",280:"HTR",281:"FCTID",282:"BRAVO",283:"ALGO",284:"BZX",285:"GXX",286:"HEAT",287:"XDN",288:"FSN",289:"CPC",290:"BOLD",291:"IOST",292:"TKEY",293:"USE",294:"BCZ",295:"IOC",296:"ASF",297:"MASS",298:"FAIR",299:"NUKO",300:"GNX",301:"DIVI",302:"CMT",303:"EUNO",304:"IOTX",305:"ONION",306:"8BIT",307:"ATC",308:"BTS",309:"CKB",310:"UGAS",311:"ADS",312:"ARA",313:"ZIL",314:"MOAC",315:"SWTC",316:"VNSC",317:"PLUG",318:"MAN",319:"ECC",320:"RPD",321:"RAP",322:"GARD",323:"ZER",324:"EBST",325:"SHARD",326:"MRX",327:"CMM",328:"BLOCK",329:"AUDAX",330:"LUNA",331:"ZPM",332:"KUVA",333:"MEM",334:"CS",335:"SWIFT",336:"FIX",337:"CPC",338:"VGO",339:"DVT",340:"N8V",341:"MTNS",342:"BLAST",343:"DCT",344:"AUX",345:"USDP",346:"HTDF",347:"YEC",348:"QLC",349:"TEA",350:"ARW",351:"MDM",352:"CYB",353:"LTO",354:"DOT",355:"AEON",356:"RES",357:"AYA",358:"DAPS",359:"CSC",360:"VSYS",361:"NOLLAR",362:"XNOS",363:"CPU",364:"LAMB",365:"VCT",366:"CZR",367:"ABBC",368:"HET",369:"XAS",370:"VDL",371:"MED",372:"ZVC",373:"VESTX",374:"DBT",375:"SEOS",376:"MXW",377:"ZNZ",378:"XCX",379:"SOX",380:"NYZO",381:"ULC",382:"RYO",383:"KAL",384:"XSN",385:"DOGEC",386:"BMV",387:"QBC",388:"IMG",389:"QOS",390:"PKT",391:"LHD",392:"CENNZ",393:"HSN",394:"CRO",395:"UMBRU",396:"EVER",397:"NEAR",398:"XPC",399:"ZOC",400:"NIX",401:"UC",402:"GALI",403:"OLT",404:"XBI",405:"DONU",406:"EARTHS",407:"HDD",408:"SUGAR",409:"AILE",410:"TENT",411:"TAN",412:"AIN",413:"MSR",414:"SUMO",415:"ETN",416:"BYTZ",417:"WOW",418:"XTNC",419:"LTHN",420:"NODE",421:"AGM",422:"CCX",423:"TNET",424:"TELOS",425:"AION",426:"BC",427:"KTV",428:"ZCR",429:"ERG",430:"PESO",431:"BTC2",432:"XRPHD",433:"WE",434:"KSM",435:"PCN",436:"NCH",437:"ICU",438:"LN",439:"DTP",440:"BTCR",441:"AERGO",442:"XTH",443:"LV",444:"PHR",445:"VITAE",446:"COCOS",447:"DIN",448:"SPL",449:"YCE",450:"XLR",451:"KTS",452:"DGLD",453:"XNS",454:"EM",455:"SHN",456:"SEELE",457:"AE",458:"ODX",459:"KAVA",460:"GLEEC",461:"FIL",462:"RUTA",463:"CSDT",464:"ETI",465:"ZSLP",466:"ERE",467:"DX",468:"CPS",469:"BTH",470:"MESG",471:"FIMK",472:"AR",473:"OGO",474:"ROSE",475:"BARE",476:"GLEEC",477:"CLR",478:"RNG",479:"OLO",480:"PEXA",481:"MOON",482:"OCEAN",483:"BNT",484:"AMO",485:"FCH",486:"LAT",487:"COIN",488:"VEO",489:"CCA",490:"GFN",491:"BIP",492:"KPG",493:"FIN",494:"BAND",495:"DROP",496:"BHT",497:"LYRA",498:"CS",499:"RUPX",500:"THETA",501:"SOL",502:"THT",503:"CFX",504:"KUMA",505:"HASH",506:"CSPR",507:"EARTH",508:"EGLD",509:"CHI",510:"KOTO",511:"OTC",512:"XRD",513:"SEELEN",514:"AETH",515:"DNA",516:"VEE",517:"SIERRA",518:"LET",519:"BSC",520:"BTCV",521:"ABA",522:"SCC",523:"EDG",524:"AMS",525:"GOSS",526:"BU",527:"GRAM",528:"YAP",529:"SCRT",530:"NOVO",531:"GHOST",532:"HST",533:"PRJ",534:"YOU",535:"XHV",536:"BYND",537:"JOYS",538:"VAL",539:"FLOW",540:"SMESH",541:"SCDO",542:"IQS",543:"BIND",544:"COINEVO",545:"SCRIBE",546:"HYN",547:"BHP",548:"BBC",549:"MKF",550:"XDC",551:"STR",552:"SUM",553:"HBC",555:"BCS",556:"KTS",557:"LKR",558:"TAO",559:"XWC",560:"DEAL",561:"NTY",562:"TOP",564:"AG",565:"CICO",566:"IRIS",567:"NCG",568:"LRG",569:"SERO",570:"BDX",571:"CCXX",572:"SLS",573:"SRM",575:"VIVT",576:"BPS",577:"NKN",578:"ICL",579:"BONO",580:"PLC",581:"DUN",582:"DMCH",583:"CTC",584:"KELP",585:"GBCR",586:"XDAG",587:"PRV",588:"SCAP",589:"TFUEL",590:"GTM",591:"RNL",592:"GRIN",593:"MWC",594:"DOCK",595:"POLYX",596:"DIVER",597:"XEP",598:"APN",599:"TFC",600:"UTE",601:"MTC",602:"NC",603:"XINY",604:"DYN",605:"BUFS",606:"STOS",607:"TON",608:"TAFT",609:"HYDRA",610:"NOR",613:"WCN",614:"OPT",615:"PSWAP",616:"VAL",617:"XOR",618:"SSP",619:"DEI",621:"ZERO",622:"ALPHA",623:"BDECO",624:"NOBL",625:"EAST",626:"KDA",627:"SOUL",628:"LORE",629:"FNR",630:"NEXUS",631:"QTZ",632:"XMA",633:"CALL",634:"VAL",635:"POKT",636:"EMIT",637:"APTOS",638:"ADON",639:"BTSG",640:"LFC",641:"KCS",642:"KCC",643:"AZERO",644:"TREE",645:"LX",646:"XLN",647:"CIC",648:"ZRB",650:"UCO",651:"SFX",652:"SFT",653:"WSFX",654:"USDG",655:"WMP",659:"KOIN",660:"PIRATE",663:"SFRX",666:"ACT",667:"PRKL",668:"SSC",669:"GC",670:"PLGR",671:"MPLGR",672:"KNOX",673:"ZED",674:"CNDL",675:"WLKR",676:"WLKRR",677:"YUNGE",678:"Voken",679:"APL",680:"Evrynet",681:"NENG",682:"CHTA",685:"OAS",686:"KAR",688:"CET",690:"KLV",694:"VTBC",698:"VEIL",699:"GTB",700:"XDAI",701:"COM",702:"CCC",707:"MCOIN",711:"CHC",712:"SERF",713:"XTL",714:"BNB",715:"SIN",716:"DLN",717:"BONTE",718:"PEER",725:"MCX",730:"HEALIOS",731:"BMK",734:"DENTX",737:"ATOP",747:"CFG",750:"XPRT",757:"HONEY",768:"BALLZ",770:"COSA",771:"BR",775:"PLSR",776:"KEY",777:"BTW",780:"PLCUC",781:"PLCUX",782:"PLCU",784:"SUI",786:"UIDD",787:"ACA",788:"BNC",789:"TAU",799:"PDEX",800:"BEET",801:"DST",804:"ZKS",808:"QVT",809:"SDN",810:"ASTR",813:"MEER",818:"VET",819:"REEF",820:"CLO",822:"BDB",827:"ACE",828:"CCN",831:"CRUZ",832:"SAPP",833:"777",834:"KYAN",835:"AZR",836:"CFL",837:"DASHD",838:"TRTT",839:"UCR",840:"PNY",841:"BECN",842:"MONK",843:"SAGA",844:"SUV",845:"ESK",846:"OWO",847:"PEPS",848:"BIR",849:"MOBIC",850:"FLS",852:"DSM",853:"PRCY",858:"HVH",866:"MOB",868:"IF",877:"NAM",880:"LUM",883:"ZBC",886:"ADF",888:"NEO",889:"TOMO",890:"XSEL",896:"LKSC",898:"AS",899:"XEC",900:"LMO",901:"NXT",904:"HNT",907:"FIS",909:"SGE",911:"GERT",916:"META",917:"FRA",919:"CCD",921:"AVN",925:"DIP",928:"GHM",931:"RUNE",945:"UNLOCK",955:"LTP",960:"VKAX",966:"MATIC",968:"UNW",970:"TWINS",977:"TLOS",981:"TAFECO",985:"AU",987:"VCG",988:"XAZAB",989:"AIOZ",990:"CORE",991:"PEC",992:"UNT",993:"XRB",994:"QUAI",995:"CAPS",996:"OKT",997:"SUM",998:"LBTC",999:"BCD",1e3:"BTN",1001:"TT",1002:"BKT",1003:"NODL",1004:"PCOIN",1005:"TAO",1006:"HSK",1007:"FTM",1008:"RPG",1010:"HT",1011:"ELV",1013:"BIC",1020:"EVC",1022:"XRD",1023:"ONE",1024:"ONT",1025:"CZZ",1026:"KEX",1027:"MCM",1032:"BTCR",1042:"MFID",1111:"BBC",1120:"RISE",1122:"CMT",1128:"ETSC",1129:"DFI",1130:"DFI",1137:"$DAG",1145:"CDY",1155:"EFI",1170:"HOO",1234:"ALPH",1284:"GLMR",1285:"MOVR",1298:"WPC",1308:"WEI",1337:"DFC",1397:"HYC",1410:"TENTSLP",1510:"XSC",1512:"AAC",1533:"BEAM",1555:"APC",1616:"ELF",1618:"AUDL",1620:"ATH",1627:"LUME",1642:"NEW",1657:"BTA",1668:"NEOX",1669:"MEWC",1688:"BCX",1729:"XTZ",1776:"LBTC",1777:"BBP",1784:"JPYS",1789:"VEGA",1815:"ADA",1818:"CUBE",1856:"TES",1888:"ZTX",1899:"XEC",1901:"CLC",1919:"VIPS",1926:"CITY",1955:"XX",1977:"XMX",1984:"TRTL",1985:"SLRT",1986:"QTH",1987:"EGEM",1988:"MIRA",1989:"HODL",1990:"PHL",1991:"SC",1996:"MYT",1997:"POLIS",1998:"XMCC",1999:"COLX",2e3:"GIN",2001:"MNP",2002:"MLN",2017:"KIN",2018:"EOSC",2019:"GBT",2020:"PKC",2021:"SKT",2022:"XHT",2048:"MCASH",2049:"TRUE",2086:"KILT",2109:"SAMA",2112:"IoTE",2137:"XRG",2182:"CHZ",2221:"ASK",2301:"QTUM",2302:"ETP",2303:"GXC",2304:"CRP",2305:"ELA",2338:"SNOW",2365:"XIN",2570:"AOA",2718:"NAS",2894:"REOSC",2941:"BND",3003:"LUX",3030:"HBAR",3077:"COS",3276:"CCC",3333:"SXP",3377:"ROI",3381:"DYN",3383:"SEQ",3552:"DEO",3564:"DST",3601:"CY",4040:"FC8",4096:"YEE",4218:"IOTA",4219:"SMR",4242:"AXE",4343:"XYM",4444:"C4E",4919:"XVM",5006:"SBC",5248:"FIC",5353:"HNS",5404:"ISK",5467:"ALTME",5555:"FUND",5757:"STX",5895:"VOW",5920:"SLU",6060:"GO",6174:"MOI",6599:"RSC",6666:"BPA",6688:"SAFE",6779:"COTI",6969:"ROGER",7091:"TOPL",7331:"KLY",7341:"SHFT",7777:"BTV",8e3:"SKY",8192:"PAC",8217:"KLAY",8339:"BTQ",8444:"XCH",8680:"PLMNT",8888:"SBTC",8964:"NULS",8997:"BBC",8998:"JGC",8999:"BTP",9e3:"AVAX",9001:"ARB1",9002:"BOBA",9003:"LOOP",9004:"STRK",9005:"AVAXC",9006:"BSC",9797:"NRG",9888:"BTF",9999:"GOD",1e4:"FO",10226:"RTM",10291:"XRC",10605:"XPI",11111:"ESS",12345:"IPOS",12586:"MINA",13107:"BTY",13108:"YCC",14001:"WAX",15845:"SDGO",16181:"XTX",16754:"ARDR",18e3:"MTR",19165:"SAFE",19167:"FLUX",19169:"RITO",20036:"XND",21004:"C4EI",21888:"PCT",22504:"PWR",25252:"BELL",25718:"CHX",29223:"NEXA",31102:"ESN",33416:"TEO",33878:"BTCS",34952:"BTT",37992:"FXTC",39321:"AMA",42069:"FACT",43028:"AXIV",49262:"EVE",49344:"STASH",52752:"CELO",61616:"TH",65536:"KETH",69420:"GRLC",70007:"GWL",77777:"ZYN",88888:"RYO",99999:"WICC",100500:"HOME",101010:"STC",105105:"STRAX",111111:"KAS",161803:"APTA",200625:"AKA",200665:"GENOM",246529:"ATS",261131:"ZAMA",314159:"PI",333332:"VALUE",333333:"3333",424242:"X42",534352:"SCR",666666:"VITE",888888:"SEA",1048576:"AMAX",1171337:"ILT",1313114:"ETHO",1313500:"XERO",1712144:"LAX",3924011:"EPK",4741444:"HYD",5249353:"BCO",5249354:"BHD",5264462:"PTN",5655640:"VLX",5718350:"WAN",5741564:"WAVES",5741565:"WEST",6382179:"ABC",6517357:"CRM",7562605:"SEM",7567736:"ION",7777777:"FCT",7825266:"WGR",7825267:"OBSR",8163271:"AFS",15118976:"XDS",61717561:"AQUA",88888888:"HATCH",91927009:"kUSD",99999996:"GENS",99999997:"EQ",99999998:"FLUID",99999999:"QKC",608589380:"FVDC"}[e])!==null&&t!==void 0?t:""}gt.getCoinSymbol=Cf;(function(e){var t=H&&H.__createBinding||(Object.create?function(y,v,h,g){g===void 0&&(g=h);var C=Object.getOwnPropertyDescriptor(v,h);(!C||("get"in C?!v.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return v[h]}}),Object.defineProperty(y,g,C)}:function(y,v,h,g){g===void 0&&(g=h),y[g]=v[h]}),r=H&&H.__setModuleDefault||(Object.create?function(y,v){Object.defineProperty(y,"default",{enumerable:!0,value:v})}:function(y,v){y.default=v}),n=H&&H.__importStar||function(y){if(y&&y.__esModule)return y;var v={};if(y!=null)for(var h in y)h!=="default"&&Object.prototype.hasOwnProperty.call(y,h)&&t(v,y,h);return r(v,y),v},i=H&&H.__exportStar||function(y,v){for(var h in y)h!=="default"&&!Object.prototype.hasOwnProperty.call(v,h)&&t(v,y,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePath=e.uuidStringify=e.uuidParse=e.toBuffer=e.toHex=e.uuid=void 0;const s=n(Hi);e.uuid=s,i(gt,e);function o(y){return y===void 0?"":Buffer.from(y).toString("hex")}e.toHex=o;function c(y){return Buffer.from(y??"","hex")}e.toBuffer=c;function l(y){return Buffer.from(s.parse(y))}e.uuidParse=l;function d(y){return s.stringify(y)}e.uuidStringify=d;function b(y){return y.replace(/^m\//i,"").split("/").map(h=>{const g=h.endsWith("'");return{index:Number(g?h.substring(0,h.length-1):h),hardened:g}})}e.parsePath=b})(qi);var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.pathToKeypath=void 0;const Rn=Yt(),Ef=e=>{const r=e.replace(/[m|M]\//,"").split("/").map(n=>{const i=parseInt(n.replace("'",""),10),s=n.endsWith("'");return new Rn.PathComponent({index:i,hardened:s})});return new Rn.CryptoKeypath(r)};Vt.pathToKeypath=Ef;(function(e){var t=H&&H.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,c)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=H&&H.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(qi,e),r(Vt,e),r(gt,e)})(ki);var Xi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URType=e.UR=void 0;var t=ue;Object.defineProperty(e,"UR",{enumerable:!0,get:function(){return t.UR}}),function(r){r.CryptoPSBT="crypto-psbt",r.CryptoMultiAccounts="crypto-multi-accounts",r.CryptoHDKey="crypto-hdkey",r.CryptoAccount="crypto-account",r.BtcSignature="btc-signature",r.ArweaveCryptoAccount="arweave-crypto-account",r.EthSignature="eth-signature",r.SolSignature="sol-signature",r.StellarSignature="stellar-signature",r.CosmosSignature="cosmos-signature",r.EvmSignature="evm-signature",r.AptosSignature="aptos-signature",r.CardanoSignature="cardano-signature",r.TronSignature="keystone-sign-result",r.KeystoneSignResult="keystone-sign-result",r.NearSignature="near-signature",r.ArweaveSignature="arweave-signature",r.SuiSignature="sui-signature",r.XrpAccount="bytes",r.XrpSignRequest="bytes",r.XrpSignature="bytes",r.TonSignature="ton-signature"}(e.URType||(e.URType={}))})(Xi);Object.defineProperty(Mr,"__esModule",{value:!0});var $i=Mr.KeystoneTonSDK=void 0;const Or=bf,Tr=ki,Sf=Xi;let Wi=class{constructor(t){this.config=t}parseSignature(t){if(t.type!==Sf.URType.TonSignature)throw new Error("type not match");const r=Or.TonSignature.fromCBOR(t.cbor),n=r.getRequestId();return{requestId:Buffer.isBuffer(n)?(0,Tr.uuidStringify)(n):"",signature:(0,Tr.toHex)(r.getSignature()),origin:r.getOrigin()}}generateSignRequest({requestId:t,signData:r,dataType:n,xfp:i,derivationPath:s,address:o}){var c;return Or.TonSignRequest.constructTonRequest((0,Tr.toBuffer)(r),n,o,t,(c=this.config)===null||c===void 0?void 0:c.origin,i,s).toUR()}};Wi.DataType=Or.DataType;$i=Mr.KeystoneTonSDK=Wi;var kr={},Gi={exports:{}},Yi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=fs(),r=us;const n={TRON_SIGN_REQUEST:new t.RegistryType("ton-sign-request",7201),TRON_SIGNATURE:new t.RegistryType("ton-signature",7202)},{decodeToDataItem:i,RegistryTypes:s}=t.extend;var o,c;(function(h){h[h.requestId=1]="requestId",h[h.signData=2]="signData",h[h.dataType=3]="dataType",h[h.derivationPath=4]="derivationPath",h[h.address=5]="address",h[h.origin=6]="origin"})(o||(o={})),(c=e.DataType||(e.DataType={}))[c.TRANSACTION=1]="TRANSACTION",c[c.SIGN_PROOF=2]="SIGN_PROOF";class l extends t.RegistryItem{constructor(g){super(),this.getRegistryType=()=>n.TRON_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDerivationPath=()=>this.derivationPath?this.derivationPath.getPath():void 0,this.getAddress=()=>this.address,this.getOrigin=()=>this.origin,this.getDataType=()=>this.dataType,this.toDataItem=()=>{const C={};if(C[o.signData]=this.signData,C[o.dataType]=this.dataType,this.derivationPath){const E=this.derivationPath.toDataItem();E.setTag(this.derivationPath.getRegistryType().getTag()),C[o.derivationPath]=E}return this.requestId&&(C[o.requestId]=new t.DataItem(this.requestId,s.UUID.getTag())),this.address&&(C[o.address]=this.address),this.origin&&(C[o.origin]=this.origin),new t.DataItem(C)},this.requestId=g.requestId,this.signData=g.signData,this.derivationPath=g.derivationPath,this.address=g.address,this.origin=g.origin,this.dataType=g.dataType}static parsePath(g,C){const E=g.replace(/[m|M]\//,"").split("/").map(S=>{const D=parseInt(S.replace("'",""));let I=!1;return S.endsWith("'")&&(I=!0),new t.PathComponent({index:D,hardened:I})});return new t.CryptoKeypath(E,Buffer.from(C,"hex"))}static constructTonRequest(g,C,E,S,D,I,w){return new l({requestId:S?Buffer.from(r.parse(S)):void 0,signData:g,dataType:C,derivationPath:w&&I?l.parsePath(w,I):void 0,address:E,origin:D})}}l.fromDataItem=h=>{const g=h.getData(),C=g[o.requestId]?g[o.requestId].getData():void 0,E=g[o.derivationPath]?t.CryptoKeypath.fromDataItem(g[o.derivationPath]):void 0;return new l({requestId:C,signData:g[o.signData],dataType:g[o.dataType],derivationPath:E,address:g[o.address],origin:g[o.origin]})},l.fromCBOR=h=>{const g=i(h);return l.fromDataItem(g)};const{RegistryTypes:d,decodeToDataItem:b}=t.extend;var y;(function(h){h[h.requestId=1]="requestId",h[h.signature=2]="signature",h[h.origin=3]="origin"})(y||(y={}));class v extends t.RegistryItem{constructor(g,C,E){super(),this.getRegistryType=()=>n.TRON_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const S={};return this.requestId&&(S[y.requestId]=new t.DataItem(this.requestId,d.UUID.getTag())),this.origin&&(S[y.origin]=this.origin),S[y.signature]=this.signature,new t.DataItem(S)},this.signature=g,this.requestId=C,this.origin=E}}v.fromDataItem=h=>{const g=h.getData(),C=g[y.signature];let E,S;return g[y.requestId]&&(E=g[y.requestId].getData()),g[y.origin]&&(S=g[y.origin]),new v(C,E,S)},v.fromCBOR=h=>{const g=b(h);return v.fromDataItem(g)},t.patchTags(Object.values(n).filter(h=>!!h.getTag()).map(h=>h.getTag())),Object.keys(t).forEach(function(h){h!=="default"&&Object.defineProperty(e,h,{enumerable:!0,get:function(){return t[h]}})}),e.TonSignRequest=l,e.TonSignature=v})(Yi);Gi.exports=Yi;var Rf=Gi.exports;Object.defineProperty(kr,"__esModule",{value:!0});var Vi=kr.KeystoneTonSDK=void 0;const Dr=Rf,br=cs,wf=ls;class Zi{constructor(t){this.config=t}parseSignature(t){if(t.type!==wf.URType.TonSignature)throw new Error("type not match");const r=Dr.TonSignature.fromCBOR(t.cbor),n=r.getRequestId();return{requestId:Buffer.isBuffer(n)?(0,br.uuidStringify)(n):"",signature:(0,br.toHex)(r.getSignature()),origin:r.getOrigin()}}generateSignRequest({requestId:t,signData:r,dataType:n,xfp:i,derivationPath:s,address:o}){var c;return Dr.TonSignRequest.constructTonRequest((0,br.toBuffer)(r),n,o,t,(c=this.config)===null||c===void 0?void 0:c.origin,i,s).toUR()}}Zi.DataType=Dr.DataType;Vi=kr.KeystoneTonSDK=Zi;const If=(e,t,r,n)=>new Vi({origin:"TonKeeper"}).generateSignRequest({signData:e.toString("hex"),dataType:t==="transaction"?1:2,address:r,xfp:n==null?void 0:n.mfp,derivationPath:n==null?void 0:n.path}),Of=(e,t)=>{const r=On(),[n,i]=te.useState(e),s=te.useMemo(()=>new Xa,[]),o=te.useCallback(()=>{n&&r.uiEvents.emit("scan",{method:"scan",id:n,params:void 0})},[r,n]);return te.useEffect(()=>{o()},[o]),te.useEffect(()=>{const c=l=>{l.id===n&&(s.receivePart(l.params),s.isComplete()?t(s.resultUR()):o())};return r.uiEvents.on("response",c),()=>{r.uiEvents.off("response",c)}},[r,n,t,o]),te.useCallback(()=>{i(Date.now())},[i])},Df=({sdk:e,transactionParams:t,onClose:r,handleResult:n})=>{const i=ds(),{t:s}=hs(),{extension:o}=ps();Cs(e,r);const c=te.useCallback(b=>{const y=new $i().parseSignature(b);n(y.signature)},[]),l=Of(null,c),d=te.useMemo(()=>If(t.message,t.messageType,gs(i.rawAddress),t.pathInfo),[t]);return be.jsxs(ys,{onSubmit:b=>{b.preventDefault(),b.stopPropagation(),l()},children:[be.jsx(vs,{title:s("keystone_sign_title"),description:s("keystone_sign_subtitle")}),be.jsx(_s,{extension:o,margin:!0,children:be.jsx(ms,{data:d})}),be.jsx(Ts,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:s("signer_scan_result")})]})},Nf=()=>{const e=On(),[t,r]=te.useState(void 0),[n,i]=te.useState(void 0),s=te.useCallback(()=>{r(void 0),i(void 0)},[]),o=te.useCallback(d=>{e.uiEvents.emit("response",{method:"response",id:n,params:d}),s()},[e,n,s]),c=te.useCallback(()=>{n&&e.uiEvents.emit("response",{method:"response",id:n,params:new Error("Cancel auth request")}),s()},[n,e,s]);te.useEffect(()=>{const d=b=>{r(b.params),i(b.id)};return e.uiEvents.on("keystone",d),()=>{e.uiEvents.off("keystone",d)}},[e]);const l=te.useCallback(()=>{if(!(!t||!n))return be.jsx(Df,{sdk:e,transactionParams:t,onClose:c,handleResult:o})},[e,t,n,c,o]);return be.jsx(bs,{isOpen:t!=null&&n!=null,handleClose:c,children:l})};export{Df as SignerContent,Nf as default};
