import{u as x,h as g,eQ as S,r as n,d3 as b,eR as h,j as o,bt as C,eS as k,eT as j,eU as E,d as v,c as _,ae as B}from"./index-zFtFmipv.js";import{u as w}from"./navigate-6HLldMU1.js";const N=({sdk:e,boc:t,onClose:l,onSubmit:s,wallet:r})=>{const{t:a}=x(),{extension:p}=g();w(e,l);const i=S(null,s),d=n.useMemo(()=>{if(!b(r))throw new Error("Unexpected wallet");return h(r.publicKey,r.version,t)},[r,t]);return o.jsxs(C,{onSubmit:u=>{u.preventDefault(),u.stopPropagation(),i()},children:[o.jsx(k,{title:a("import_signer"),description:a("signer_scan_tx_description")}),o.jsx(j,{extension:p,margin:!0,children:o.jsx(E,{message:d})}),o.jsx(v,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:a("signer_scan_result")})]})},A=()=>{const e=_(),[t,l]=n.useState(void 0),[s,r]=n.useState(void 0),[a,p]=n.useState(void 0),i=n.useCallback(()=>{l(void 0),r(void 0)},[]),d=n.useCallback(c=>{console.log(c),e.uiEvents.emit("response",{method:"response",id:s,params:c}),i()},[e,s,i]),u=n.useCallback(()=>{s&&e.uiEvents.emit("response",{method:"response",id:s,params:new Error("Cancel auth request")}),i()},[s,e,i]);n.useEffect(()=>{const c=m=>{l(m.params.boc),r(m.id),p(m.params.wallet)};return e.uiEvents.on("signer",c),()=>{e.uiEvents.off("signer",c)}},[e]);const f=n.useCallback(()=>{if(!(!t||!s||!a))return o.jsx(N,{sdk:e,boc:t,onClose:u,onSubmit:d,wallet:a})},[e,t,s,u,d,a]);return o.jsx(B,{isOpen:t!=null&&s!=null,handleClose:u,children:f})};export{N as SignerContent,A as default};
