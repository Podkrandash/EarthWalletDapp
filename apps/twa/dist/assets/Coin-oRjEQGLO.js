import{dM as P,dN as E,bE as H,dO as M,cO as N,ci as k,r as i,j as e,dP as u,S as x,I as f,dQ as b,h as U,dr as _,ds as B,dt as S,b5 as W,dR as A,cp as h,dS as v,dx as j,dT as p,u as y,dU as w,c8 as m,dz as F,c as O,aW as D,dV as T,b0 as C,dw as J,$ as z,z as L,a6 as V,dW as K}from"./index-zFtFmipv.js";import{u as Q,M as $}from"./MobileActivityList-kLuEMAcn.js";import{S as q,R as G,a as X,H as I}from"./TonActions-raD8q4ab.js";import Y from"./EmptyActivity-jHloWfyV.js";import{S as Z,R as ee}from"./BuyAction-fHau53XV.js";const g=({assetAddress:s,innerRef:t})=>{const{standalone:a}=U(),{refetch:o,isFetched:n,fetchNextPage:r,hasNextPage:d,isFetchingNextPage:l,data:c}=_(s);B(t,5e3,o);const R=l;return Q(d,R,r,a,t),!n||!c?e.jsx(S,{}):c.length===0?e.jsx(i.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Y,{})}):e.jsxs(e.Fragment,{children:[e.jsx($,{items:c}),R&&e.jsx(W,{size:3})]})},se=({info:s,balance:t})=>{const[a,o]=i.useMemo(()=>[A(t.balance,s.metadata.decimals),N.Address.parse(t.jetton.address).toString()],[s,t]),{data:n}=h(o),r=v(a,s.metadata.decimals),{fiatAmount:d}=j(n,a),{description:l,image:c}=s.metadata;return e.jsx(p,{amount:r,symbol:s.metadata.symbol,price:d,description:l,image:c})},te=({jettonAddress:s})=>{const{data:t}=P(s),{data:a}=E(s),o=H(),{data:n}=M(),r=N.Address.parse(s).toRawString(),d=o||n==null?void 0:n.find(c=>k(c.address)===r),l=i.useRef(null);return!t||!a||!n?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:t.metadata.name}),e.jsxs(f,{ref:l,children:[e.jsx(se,{balance:a,info:t}),e.jsxs(b,{children:[!o&&e.jsx(q,{asset:t.metadata.address}),e.jsx(G,{jetton:t.metadata.address}),d&&e.jsx(X,{fromAsset:d})]}),e.jsx(g,{assetAddress:a.jetton.address,innerRef:l})]})]})},ae=({info:{balance:s}})=>{const{t}=y(),a=i.useMemo(()=>A(s),[s]),o=v(a),{data:n}=h(F.TON),{fiatAmount:r}=j(n,a);return e.jsx(p,{amount:o,symbol:"TON",price:r,description:t("Ton_page_description"),image:"https://earth-wallet.com/img/toncoin.svg"})},ne=()=>{const{t:s}=y(),t=i.useRef(null),{data:a}=w();return a?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s("Toncoin")}),e.jsxs(f,{ref:t,children:[e.jsx(ae,{info:a}),e.jsx(I,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:F.TON})]})]}):e.jsx(u,{activity:4})},oe=()=>{const s=O();return{onOpen:i.useCallback(a=>{s.uiEvents.emit("transfer",{method:"transfer",id:Date.now(),params:{...a,from:"wallet"}})},[s])}},ie=({assetAmount:s})=>{const{data:t}=J(),{fiatAmount:a}=j(t,s.relativeAmount);return e.jsx(p,{amount:s.stringRelativeAmount,symbol:s.asset.symbol,price:a,image:s.asset.image,imageNoCorners:!0})},re=()=>{var n;const s=(n=D().data)==null?void 0:n.usdt,t=i.useRef(null),a=O(),{onOpen:o}=oe();return s===void 0?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s.asset.name}),e.jsxs(f,{ref:t,children:[e.jsx(ie,{assetAmount:s}),e.jsxs(b,{children:[e.jsx(T,{icon:e.jsx(Z,{}),title:"wallet_send",action:()=>o({chain:m.TRON})}),e.jsx(T,{icon:e.jsx(ee,{}),title:"wallet_receive",action:()=>a.uiEvents.emit("receive",{method:"receive",params:{chain:m.TRON,jetton:s.asset.id}})})]}),e.jsx(g,{assetAddress:C.address,innerRef:t})]})]})},ce=({extra:s})=>{const t=i.useMemo(()=>A(s.amount,s.preview.decimals),[s]),a=v(t),{data:o}=h(s.preview.symbol),{fiatAmount:n}=j(o,t);return e.jsx(p,{amount:a,symbol:s.preview.symbol,price:n,image:s.preview.image})},de=({name:s})=>{var n;y();const t=i.useRef(null),{data:a}=w(),o=(n=a==null?void 0:a.extraBalance)==null?void 0:n.find(r=>r.preview.symbol===s);return o?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s}),e.jsxs(f,{ref:t,children:[e.jsx(ce,{extra:o}),e.jsx(I,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:o.preview.symbol})]})]}):e.jsx(u,{activity:4})},je=()=>{const s=z(),{name:t}=L();return i.useEffect(()=>{t||s(V.home)},[t]),t?t===C.id?e.jsx(re,{}):t==="ton"?e.jsx(ne,{}):K(decodeURIComponent(t))?e.jsx(te,{jettonAddress:decodeURIComponent(t)}):e.jsx(de,{name:t}):e.jsx(e.Fragment,{})};export{je as default};
